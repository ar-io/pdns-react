{"version":3,"file":"ViewAuction-945609b0.js","sources":["../../src/components/icons/ArrowRight.svg","../../src/components/layout/ViewAuction/ViewAuction.tsx"],"sourcesContent":["export default \"__VITE_ASSET__ae81b99c__\"","import { startCase } from 'lodash';\nimport { useEffect } from 'react';\nimport { Link, Navigate, useNavigate, useParams } from 'react-router-dom';\n\nimport { useAuctionInfo, useIsMobile } from '../../../hooks';\nimport { ArweaveTransactionID } from '../../../services/arweave/ArweaveTransactionID';\nimport { useGlobalState } from '../../../state/contexts/GlobalState';\nimport {\n  decodeDomainToASCII,\n  encodeDomainToASCII,\n  isARNSDomainNameValid,\n  lowerCaseDomain,\n  sleep,\n} from '../../../utils';\nimport eventEmitter from '../../../utils/events';\nimport { ArrowLeft, ArrowRightIcon, ClockClockwiseIcon } from '../../icons';\nimport ArweaveID, { ArweaveIdTypes } from '../ArweaveID/ArweaveID';\nimport AuctionChart from '../AuctionChart/AuctionChart';\nimport BlockHeightCounter from '../BlockHeightCounter/BlockHeightCounter';\nimport PageLoader from '../progress/PageLoader/PageLoader';\n\nfunction ViewAuction() {\n  const [{ blockHeight, lastBlockUpdateTimestamp, ioTicker }] =\n    useGlobalState();\n  const { name } = useParams();\n  const navigate = useNavigate();\n  const { auction, loadingAuctionInfo } = useAuctionInfo(\n    lowerCaseDomain(name ?? ''),\n  );\n  const isMobile = useIsMobile();\n\n  useEffect(() => {\n    if (!name || (name && !isARNSDomainNameValid({ name }))) {\n      eventEmitter.emit('error', new Error('No name detected'));\n      navigate('/auctions');\n    }\n    if (auction) {\n      if (!auction.isActive) {\n        eventEmitter.emit(\n          'error',\n          new Error('This auction has expired, rerouting...'),\n        );\n        handleExpired();\n      }\n    }\n  }, [blockHeight, lastBlockUpdateTimestamp, auction, name]);\n\n  async function handleExpired() {\n    await sleep(2000); // TODO: why do we wait here?\n    navigate('/auctions');\n  }\n\n  if (loadingAuctionInfo || !auction) {\n    return (\n      <div className=\"page center\">\n        <PageLoader\n          loading={loadingAuctionInfo}\n          message={`Fetching latest auction info...`}\n        />\n      </div>\n    );\n  }\n\n  if (!loadingAuctionInfo && auction?.isActive === false) {\n    eventEmitter.emit(\n      'error',\n      new Error('This auction does not exist, rerouting...'),\n    );\n\n    return <Navigate to=\"/auctions\" />;\n  }\n\n  return (\n    <div className=\"page\" style={{ paddingTop: '30px' }}>\n      <div\n        className=\"flex flex-column\"\n        style={{\n          gap: '30px',\n          justifyContent: 'flex-start',\n          alignItems: 'flex-start',\n          maxWidth: '900px',\n        }}\n      >\n        <Link to=\"/auctions\" className=\" flex button white center pointer\">\n          <ArrowLeft width={'16px'} height={'16px'} fill={'white'} />\n          &nbsp;Back\n        </Link>\n\n        <div\n          className=\"flex flex-row center\"\n          style={{\n            justifyContent: 'space-between',\n            borderBottom: 'solid 1px var(--text-faded)',\n            padding: '0px 0px 30px 0px',\n          }}\n        >\n          <span className=\"white bold\" style={{ fontSize: '36px' }}>\n            {decodeDomainToASCII(name!)}\n          </span>\n          <button\n            className=\"accent-button center\"\n            onClick={() => navigate(`/register/${name}`)}\n          >\n            {startCase(auction!.type)} Now&nbsp;\n            <ArrowRightIcon width={'16px'} height={'16px'} />\n          </button>\n        </div>\n\n        <div className=\"flex flex-column\" style={{ gap: '15px' }}>\n          <div className=\"flex flex-column\" style={{ gap: '15px' }}>\n            <span className=\"flex white\">\n              Current auction price for instant {auction!.type}:&nbsp;\n              <span\n                className=\"bold\"\n                style={{\n                  color: 'var(--accent)',\n                }}\n              >\n                {auction!.currentPrice.toLocaleString() ?? 0} {ioTicker}\n              </span>\n            </span>\n            <span className=\"flex grey\" style={{ color: 'var(--text-grey)' }}>\n              Started by:&nbsp;\n              <ArweaveID\n                id={new ArweaveTransactionID(auction!.initiator)}\n                type={ArweaveIdTypes.ADDRESS}\n                shouldLink={true}\n                characterCount={isMobile ? 10 : undefined}\n              />\n            </span>\n          </div>\n          <BlockHeightCounter\n            prefixText={\n              <span className=\"flex center\" style={{ gap: '10px' }}>\n                <ClockClockwiseIcon width={'18px'} height={'18px'} /> Next price\n                update:\n              </span>\n            }\n          />\n\n          <AuctionChart\n            domain={encodeDomainToASCII(name!)}\n            showAuctionExplainer={true}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ViewAuction;\n"],"names":["SvgArrowRight","props","reactExports","ViewAuction","blockHeight","lastBlockUpdateTimestamp","ioTicker","useGlobalState","name","useParams","navigate","useNavigate","auction","loadingAuctionInfo","useAuctionInfo","lowerCaseDomain","isMobile","useIsMobile","isARNSDomainNameValid","eventEmitter","handleExpired","sleep","jsxRuntimeExports","PageLoader","Navigate","Link","SvgArrowLeft","decodeDomainToASCII","lodashExports","ArweaveID","ArweaveTransactionID","ArweaveIdTypes","BlockHeightCounter","SvgClockClockwise","AuctionChart","encodeDomainToASCII"],"mappings":"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"}