import{d as B,aU as O,c as U,cB as M,a as P,r as d,cJ as W,be as h,bg as S,by as r,bD as Y,aI as F,aX as $,cK as q,j as e,bA as G,aN as X,aR as w,bE as I,cp as z,cq as V,bC as H,cL as J,bG as K,bs as g,bH as Q,A,bz as b}from"./index-6b99bef1.js";import{C as Z}from"./Counter-4cefb80f.js";(function(){try{var l=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},x=new Error().stack;x&&(l._sentryDebugIds=l._sentryDebugIds||{},l._sentryDebugIds[x]="9059c3be-f8bd-4fdb-5d62-ba966f1b4a45",l._sentryDebugIdIdentifier="sentry-dbid-9059c3be-f8bd-4fdb-5d62-ba966f1b4a45")}catch{}})();function ae(){const[{arioTicker:l,arioContract:x,arioProcessId:y}]=B(),[{walletAddress:v}]=O(),[,c]=U(),T=M(),p=P(),a=T.pathname.split("/").at(-2),[n,R]=d.useState(),[t,m]=d.useState(),[f,L]=d.useState(1),[o,D]=d.useState(0),[N,k]=d.useState(0),[E,j]=d.useState(!1),{data:s}=W(t==="permabuy"?{intent:"Upgrade-Name",name:a}:{intent:"Extend-Lease",years:f,type:t==null?void 0:t.toString(),name:a});d.useEffect(()=>{if(!a){p("/manage/names");return}C(h(a))},[a]);async function C(u){try{j(!0);const i=await x.getArNSRecord({name:h(u)});if(!i)throw new Error(`Unable to get record for ${u}`);if(m(i.type),R(i),!S(i)){m(r.BUY);return}if(v){const _=await x.getBalance({address:v.toString()});k(_??0)}D(Math.max(0,Y-F(i.startTimestamp,i.endTimestamp)))}catch(i){$.emit("error",i),await q(2e3),p("/manage/names")}finally{j(!1)}}return!n||!a?e.jsx(G,{loading:!n,message:`Loading info for ${a}`}):S(n)?e.jsx("div",{className:"page center",children:e.jsxs("div",{className:"flex flex-column",style:{maxWidth:"1000px"},children:[e.jsxs("div",{className:"flex flex-row center",style:{justifyContent:"space-between"},children:[e.jsx("h1",{className:"white text-[2rem]",children:"Extend Lease"}),e.jsxs("div",{className:"flex flex-row center white",style:{border:"solid 1px var(--text-faded)",borderRadius:"var(--corner-radius)",gap:"8px",width:"fit-content",padding:"12px"},children:[e.jsx(w,{width:"22px",height:"22px",fill:"var(--text-grey)"}),"Expiring on ",I(n.endTimestamp)]})]})," ",e.jsxs("div",{className:"flex flex-row flex-space-between",style:{gap:"25px"},children:[e.jsxs("button",{className:"flex flex-row center text-medium bold pointer",onClick:()=>m(r.LEASE),style:{position:"relative",background:t===r.LEASE?"var(--text-white)":"",color:t===r.LEASE?"var(--text-black)":"var(--text-white)",border:"solid 2px var(--text-faded)",borderRadius:"var(--corner-radius)",height:"56px",borderBottomWidth:"0.5px"},children:["Extend Lease"," ",t===r.LEASE?e.jsx("div",{style:{position:"absolute",bottom:"-6px",left:"50%",transform:"rotate(45deg)",width:"11px",height:"11px",background:"var(--text-white)"}}):e.jsx(e.Fragment,{})]}),e.jsxs("button",{className:"flex flex-row center text-medium bold pointer",style:{position:"relative",background:t===r.BUY?"var(--text-white)":"",color:t===r.BUY?"var(--text-black)":"var(--text-white)",border:"solid 2px var(--text-faded)",borderRadius:"var(--corner-radius)",height:"56px",borderBottomWidth:"0.5px"},onClick:()=>m(r.BUY),children:["Permanently Buy"," ",t===r.BUY?e.jsx("div",{style:{position:"absolute",bottom:-6,left:"50%",transform:"rotate(45deg)",width:"11px",height:"11px",background:"var(--text-white)"}}):e.jsx(e.Fragment,{})]})]}),e.jsx("div",{className:"flex flex-col relative p-[30px] w-full h-[200px] bg-foreground box-border rounded-md items-center justify-center ",children:t===r.LEASE?e.jsxs(e.Fragment,{children:[" ",E&&e.jsx("div",{className:"flex flex-col items-center justify-center rounded-md bg-foreground h-full w-full absolute top-0 left-0",children:e.jsx("div",{className:"flex flex-row items-center justify-center",children:e.jsx(z,{animationData:V,loop:!0,className:"h-[150px]"})})}),!E&&o<1&&e.jsx("div",{className:"flex flex-col center  rounded-md  bg-[rgb(0,0,0,0.5)] h-full w-full absolute top-0 left-0",children:e.jsxs("div",{className:"flex flex-row items-center justify-center max-w-fit h-fit rounded-md border border-error text-white bg-foreground p-6 gap-2",children:[" ",e.jsx(w,{width:"24px",height:"24px",fill:"var(--error-red)"}),e.jsx("span",{className:"center",children:"Maximum lease extension reached"})]})}),e.jsx(Z,{setValue:L,value:f,maxValue:o,minValue:H,valueName:f>1?"years":"year",valueStyle:{padding:"10px 80px"},detail:e.jsxs("span",{children:["until"," ",I(n.endTimestamp+f*J)]}),title:e.jsx("span",{className:"white",style:{padding:"0px 10px 10px 10px",fontWeight:"500"},children:`Extension Duration ( up to ${Math.max(1,o)} year${o>1?"s":""} )`})})]}):e.jsxs("div",{className:"flex flex-column flex-center",style:{gap:"1em"},children:[e.jsx("span",{className:"text-medium grey center",children:"Registration Period"}),e.jsx("span",{className:"text-medium white center",children:"Permanent"})]})}),e.jsx(K,{feeWrapperStyle:{alignItems:"center",justifyContent:"center",height:"100%"},fee:{[l]:s?new g(s).toARIO().valueOf():void 0},ioRequired:!0}),e.jsx(Q,{backText:"Cancel",nextText:"Continue",customNextStyle:{background:o<1&&"var(--text-grey)",color:o<1&&"var(--text-white)"},onBack:()=>{p(`/manage/names/${h(a)}`)},onNext:!s||s<0?void 0:o>=1||s<=N?()=>{if(t===r.LEASE){const u={name:a,years:f,processId:new A(n.processId),qty:s};c({type:"setInteractionType",payload:b.EXTEND_LEASE}),c({type:"setWorkflowName",payload:b.EXTEND_LEASE}),c({type:"setTransactionData",payload:{assetId:y,functionName:"extendRecord",...u,arnsRecord:n,interactionPrice:new g(s).toARIO().valueOf()}})}else c({type:"setInteractionType",payload:b.UPGRADE_NAME}),c({type:"setWorkflowName",payload:b.UPGRADE_NAME}),c({type:"setTransactionData",payload:{assetId:y,functionName:"upgradeName",name:a,processId:new A(n.processId),qty:s,arnsRecord:n,interactionPrice:new g(s).toARIO().valueOf()}});p("/transaction/review",{state:`/manage/names/${h(a)}/extend`})}:void 0,detail:s&&new g(s).toARIO().valueOf()>=N&&o>0?e.jsxs("div",{className:"flex flex-row center",style:{width:"fit-content",height:"fit-content",borderRadius:"var(--corner-radius)",border:"solid 1px var(--error-red)",background:"#1D1314",padding:"8px",boxSizing:"border-box",color:"var(--error-red)",gap:"10px",whiteSpace:"nowrap",fontSize:"13px"},children:[" ",e.jsx(w,{width:"24px",height:"24px",fill:"var(--error-red)"}),e.jsx("span",{className:"center",children:"Insufficient funds."})]}):e.jsx(e.Fragment,{})})]})}):e.jsx("div",{className:"page center",children:e.jsx(X,{showClose:!1,cancelText:"Manage",body:e.jsx("span",{className:"flex flex-column white center",style:{height:"100%"},children:"This domain is permanently registered and its lease cannot be extended."})})})}export{ae as default};
//# sourceMappingURL=ExtendLease-6a83bb9b.js.map
