import{b1 as x,b6 as A,cv as _,cw as g,b3 as q,bi as O,cx as Q}from"./index-5a80b799.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new Error().stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="dca521ae-4972-4cae-368b-94fcd79fba8b",e._sentryDebugIdIdentifier="sentry-dbid-dca521ae-4972-4cae-368b-94fcd79fba8b")}catch{}})();function P({domain:e,antId:r}){const[{arioContract:a,ioProcessId:f,aoNetwork:u}]=x(),[{wallet:i}]=A(),{data:p,isLoading:I,isRefetching:h,error:m,refetch:N}=_({queryKey:["domainInfo",{domain:e,antId:r,ioProcessId:f,aoNetwork:u}],queryFn:()=>R({domain:e,antId:r}).catch(n=>n),refetchOnWindowFocus:!1});async function R({domain:n,antId:d}){if(!n&&!d)throw new Error("No domain or antId provided");const o=n?await a.getArNSRecord({name:q(n)}):void 0;if(!d&&!(o!=null&&o.processId))throw new Error("No ANT id or record found");const c=d||(o==null?void 0:o.processId),w=i==null?void 0:i.contractSigner;if(!c)throw new Error("No processId found");const l=O.init({processId:c,...w!==void 0?{signer:w}:{}}),t=await l.getState();if(!t)throw new Error("State not found for ANT contract");const C=await g.fetchQuery(Q({arioContract:a,meta:[f,u.CU_URL]})),S=Object.entries(C).filter(([,s])=>s.processId==c.toString()).map(([s])=>s),{Name:D,Ticker:v,Owner:T,Controllers:E,Records:b}=t,y=b["@"],k=Object.keys(b).filter(s=>s!=="@").length;if(!y)throw new Error("No apexRecord found");return{arnsRecord:o,associatedNames:S,processId:c,antProcess:l,name:D,ticker:v,owner:T,controllers:E,undernameCount:k,apexRecord:y,sourceCodeTxId:t==null?void 0:t["Source-Code-TX-ID"],records:t.Records}}return{data:p,isLoading:I||h,error:m,refetch:()=>{g.invalidateQueries({queryKey:["domainInfo",{domain:e,antId:r}],refetchType:"all"}),N()}}}export{P as u};
//# sourceMappingURL=useDomainInfo-4fcf262c.js.map
