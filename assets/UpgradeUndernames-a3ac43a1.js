import{aF as k,cC as _,a as L,aE as M,b as W,r as n,cI as O,bc as i,A as P,bl as z,aU as N,j as e,aZ as F,cs as V,aM as q,bv as x,bC as B,bo as $}from"./index-8b8ce662.js";import{W as G}from"./WarningCard-79792fe2.js";import{g as Q}from"./transaction-descriptions-413b53ac.js";import{C as X}from"./Counter-24e3ea68.js";import{T as Y}from"./TransactionCost-f2d909b4.js";(function(){try{var o=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c=new Error().stack;c&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[c]="f9f49d81-fa1b-4f5f-4b46-7d2e3174b982",o._sentryDebugIdIdentifier="sentry-dbid-f9f49d81-fa1b-4f5f-4b46-7d2e3174b982")}catch{}})();function te(){const o=k(),c=_(),d=L(),[{arweaveDataProvider:b,ioTicker:g,arioContract:h,ioProcessId:w}]=M(),t=c.pathname.split("/").at(-2),[,u]=W(),[s,I]=n.useState(),[S,v]=n.useState(),[C,j]=n.useState(0),[r,E]=n.useState(0),[T,y]=n.useState(!1),[l,f]=n.useState(0);n.useEffect(()=>{U()},[t]),n.useEffect(()=>{if(!t||!s)return;f(void 0),(async()=>{if(r===0){f(0);return}Number.isNaN(r)&&N.emit("error",new Error("Invalid undername count, must be a number greater than 0"));const p=await h.getTokenCost({intent:"Increase-Undername-Limit",name:i(t),quantity:r}).then(m=>new $(m).toIO().valueOf());f(p)})()},[r,s,t]);async function U(){try{if(y(!0),t&&O({name:i(t)})){const a=await b.getRecord({domain:i(t)});if(!a)throw new Error(`Unable to get record for ${t}`);I(a);const p=new P(a==null?void 0:a.processId),m=z.init({processId:p.toString()}),R=await m.getRecords().then(A=>Object.keys(A).filter(D=>D==="@").length);j(R),v(m)}}catch(a){N.emit("error",a),d("/manage/names")}finally{y(!1)}}return T||!s||!S||!t?e.jsx("div",{className:"page center",children:e.jsx(F,{size:80,message:"Loading domain record"})}):e.jsx("div",{className:"page center",children:e.jsxs("div",{className:"flex flex-column",style:{maxWidth:"1000px"},children:[e.jsx("h1",{className:"flex white text-[2rem]",children:"Increase Undernames"}),e.jsxs("div",{className:"flex center",style:{justifyContent:"space-between",border:"1px solid var(--text-faded)",padding:"35px 40px",borderRadius:"var(--corner-radius)",flexDirection:o?"column":"row",gap:"30px"},children:[e.jsxs("div",{className:"flex flex-column",style:{fontSize:"16px",width:"fit-content",gap:"5px"},children:[e.jsxs("span",{className:"flex grey center",style:{gap:"8px",whiteSpace:"nowrap"},children:["Total Undernames:"," ",e.jsx("span",{className:"white",children:s.undernameLimit}),e.jsxs("span",{className:"flex add-box center",style:{},children:["+",r]})]}),e.jsxs("span",{className:"flex grey",children:["Used:Â ",e.jsxs("span",{className:"white",children:[" ",C]})]})]}),e.jsx(X,{maxValue:V-s.undernameLimit,minValue:0,value:r,setValue:E,containerStyle:{width:"fit-content",justifyContent:"center",alignItems:"center"},valueStyle:{background:"var(--card-bg)",width:"50px",height:"40px",alignItems:"center",justifyContent:"center",border:"1px solid var(--text-faded)",borderRadius:"var(--corner-radius)",margin:"0px 10px",fontSize:"14px"},editable:!0})]}),e.jsx(Y,{feeWrapperStyle:{alignItems:"center",justifyContent:"center",height:"100%"},ioRequired:!0,fee:{[g]:l,ar:0},info:e.jsx("div",{children:e.jsx(G,{wrapperStyle:{padding:"10px",fontSize:"14px",alignItems:"center"},customIcon:e.jsx(q,{width:"20px",fill:"var(--accent)"}),text:Q({workflowName:x.INCREASE_UNDERNAMES,ioTicker:g})||""})})}),e.jsx(B,{backText:"Cancel",nextText:"Confirm",onBack:()=>d(`/manage/names/${i(t)}`),onNext:!l||l<0?void 0:()=>{const a={name:i(t),qty:r,oldQty:s.undernameLimit,processId:s.processId};u({type:"setTransactionData",payload:{assetId:w,functionName:"increaseundernameLimit",...a,interactionPrice:l}}),u({type:"setInteractionType",payload:x.INCREASE_UNDERNAMES}),u({type:"setWorkflowName",payload:x.INCREASE_UNDERNAMES}),d("/transaction/review",{state:`/manage/names/${i(t)}/upgrade-undernames`})},customBackStyle:{minWidth:"100px",padding:" 12px 16px"},customNextStyle:{minWidth:"100px",padding:" 12px 16px"}})]})})}export{te as default};
//# sourceMappingURL=UpgradeUndernames-a3ac43a1.js.map
