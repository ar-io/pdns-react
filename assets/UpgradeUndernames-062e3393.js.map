{"version":3,"file":"UpgradeUndernames-062e3393.js","sources":["../../src/components/pages/Transaction/transaction-descriptions.ts","../../src/hooks/useIncreaseUndernameCost.tsx","../../src/components/layout/UpgradeUndernames/UpgradeUndernames.tsx"],"sourcesContent":["import { ANT_INTERACTION_TYPES, ARNS_INTERACTION_TYPES } from '@src/types';\n\nexport function getTransactionDescription({\n  workflowName,\n  ...params\n}: {\n  workflowName: ARNS_INTERACTION_TYPES | ANT_INTERACTION_TYPES;\n} & Record<string, any>) {\n  switch (workflowName) {\n    case ARNS_INTERACTION_TYPES.INCREASE_UNDERNAMES:\n      return `Increasing your undernames is paid in ${params.arioTicker} tokens.`;\n    case ARNS_INTERACTION_TYPES.EXTEND_LEASE:\n    case ARNS_INTERACTION_TYPES.BUY_RECORD:\n      return `This includes a registration fee (paid in ${params.arioTicker} tokens).`;\n    default:\n      return undefined;\n  }\n}\n","import { useGlobalState } from '@src/state';\nimport { useQuery } from '@tanstack/react-query';\n\nexport function useIncreaseUndernameCost({\n  name,\n  quantity,\n}: {\n  name: string;\n  quantity: number;\n}) {\n  const [{ arioProcessId, arioContract }] = useGlobalState();\n  return useQuery({\n    queryKey: [\n      'increaseUndernameCost',\n      quantity,\n      arioProcessId.toString(),\n      name,\n    ],\n    queryFn: async () => {\n      return await arioContract.getTokenCost({\n        intent: 'Increase-Undername-Limit',\n        quantity,\n        name,\n      });\n    },\n    staleTime: 1000 * 60 * 5,\n  });\n}\n","import { mARIOToken } from '@ar.io/sdk/web';\nimport WarningCard from '@src/components/cards/WarningCard/WarningCard';\nimport { getTransactionDescription } from '@src/components/pages/Transaction/transaction-descriptions';\nimport useDomainInfo from '@src/hooks/useDomainInfo';\nimport { useIncreaseUndernameCost } from '@src/hooks/useIncreaseUndernameCost';\nimport { useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\n\nimport { useIsMobile } from '../../../hooks';\nimport { useGlobalState } from '../../../state/contexts/GlobalState';\nimport { useTransactionState } from '../../../state/contexts/TransactionState';\nimport {\n  ARNS_INTERACTION_TYPES,\n  IncreaseUndernamesPayload,\n} from '../../../types';\nimport { lowerCaseDomain } from '../../../utils';\nimport { MAX_UNDERNAME_COUNT } from '../../../utils/constants';\nimport { InfoIcon } from '../../icons';\nimport Counter from '../../inputs/Counter/Counter';\nimport WorkflowButtons from '../../inputs/buttons/WorkflowButtons/WorkflowButtons';\nimport Loader from '../Loader/Loader';\nimport TransactionCost from '../TransactionCost/TransactionCost';\n\nfunction UpgradeUndernames() {\n  const isMobile = useIsMobile();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const [{ arioTicker, arioProcessId }] = useGlobalState();\n  const name = location.pathname.split('/').at(-2);\n  const [, dispatchTransactionState] = useTransactionState();\n  const [newUndernameCount, setNewUndernameCount] = useState<number>(0);\n  const { data: domainData } = useDomainInfo({ domain: name });\n\n  const { data: fee } = useIncreaseUndernameCost({\n    name: lowerCaseDomain(name ?? ''),\n    quantity: newUndernameCount,\n  });\n  const {\n    arnsRecord,\n    antProcess: antContract,\n    undernameCount,\n  } = domainData ?? {};\n  if (!arnsRecord || !antContract || !name) {\n    return (\n      <div className=\"page center\">\n        <Loader size={80} message=\"Loading domain record\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"page center\">\n      <div className=\"flex flex-column\" style={{ maxWidth: '1000px' }}>\n        <h1 className=\"flex white text-[2rem]\">Increase Undernames</h1>\n        <div\n          className=\"flex center\"\n          style={{\n            justifyContent: 'space-between',\n            border: '1px solid var(--text-faded)',\n            padding: '35px 40px',\n            borderRadius: 'var(--corner-radius)',\n            flexDirection: isMobile ? 'column' : 'row',\n            gap: '30px',\n          }}\n        >\n          <div\n            className=\"flex flex-column\"\n            style={{ fontSize: '16px', width: 'fit-content', gap: '5px' }}\n          >\n            <span\n              className=\"flex grey center\"\n              style={{ gap: '8px', whiteSpace: 'nowrap' }}\n            >\n              Total Undernames:{' '}\n              <span className=\"white\">{arnsRecord.undernameLimit}</span>\n              <span className=\"flex add-box center\" style={{}}>\n                +{newUndernameCount}\n              </span>\n            </span>\n            <span className=\"flex grey\">\n              Used:&nbsp;\n              <span className=\"white\"> {undernameCount}</span>\n            </span>\n          </div>\n          <Counter\n            maxValue={MAX_UNDERNAME_COUNT - arnsRecord.undernameLimit}\n            minValue={0}\n            value={newUndernameCount}\n            setValue={setNewUndernameCount}\n            containerStyle={{\n              width: 'fit-content',\n              justifyContent: 'center',\n              alignItems: 'center',\n            }}\n            valueStyle={{\n              background: 'var(--card-bg)',\n              width: '50px',\n              height: '40px',\n              alignItems: 'center',\n              justifyContent: 'center',\n              border: '1px solid var(--text-faded)',\n              borderRadius: 'var(--corner-radius)',\n              margin: '0px 10px',\n              fontSize: '14px',\n            }}\n            editable={true}\n          />\n        </div>\n        <TransactionCost\n          feeWrapperStyle={{\n            alignItems: 'center',\n            justifyContent: 'center',\n            height: '100%',\n          }}\n          ioRequired={true}\n          fee={{\n            [arioTicker]:\n              newUndernameCount === 0\n                ? 0\n                : fee\n                ? new mARIOToken(fee).toARIO().valueOf()\n                : undefined,\n            ar: 0,\n          }}\n          info={\n            <div>\n              <WarningCard\n                wrapperStyle={{\n                  padding: '10px',\n                  fontSize: '14px',\n                  alignItems: 'center',\n                }}\n                customIcon={<InfoIcon width={'20px'} fill={'var(--accent)'} />}\n                text={\n                  getTransactionDescription({\n                    workflowName: ARNS_INTERACTION_TYPES.INCREASE_UNDERNAMES,\n                    arioTicker,\n                  }) || ''\n                }\n              />\n            </div>\n          }\n        />\n        <WorkflowButtons\n          backText=\"Cancel\"\n          nextText=\"Confirm\"\n          onBack={() => navigate(`/manage/names/${lowerCaseDomain(name)}`)}\n          onNext={\n            !fee || fee < 0\n              ? undefined\n              : () => {\n                  const increaseUndernamePayload: IncreaseUndernamesPayload = {\n                    name: lowerCaseDomain(name),\n                    qty: newUndernameCount,\n                    oldQty: arnsRecord.undernameLimit,\n                    processId: arnsRecord.processId,\n                  };\n                  dispatchTransactionState({\n                    type: 'setTransactionData',\n                    payload: {\n                      assetId: arioProcessId,\n                      functionName: 'increaseundernameLimit',\n                      ...increaseUndernamePayload,\n                      interactionPrice: new mARIOToken(fee).toARIO().valueOf(),\n                    },\n                  });\n                  dispatchTransactionState({\n                    type: 'setInteractionType',\n                    payload: ARNS_INTERACTION_TYPES.INCREASE_UNDERNAMES,\n                  });\n                  dispatchTransactionState({\n                    type: 'setWorkflowName',\n                    payload: ARNS_INTERACTION_TYPES.INCREASE_UNDERNAMES,\n                  });\n                  // navigate to the transaction page, which will load the updated state of the transaction context\n                  navigate('/transaction/review', {\n                    state: `/manage/names/${lowerCaseDomain(\n                      name,\n                    )}/upgrade-undernames`,\n                  });\n                }\n          }\n          customBackStyle={{\n            minWidth: '100px',\n            padding: ' 12px 16px',\n          }}\n          customNextStyle={{\n            minWidth: '100px',\n            padding: ' 12px 16px',\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default UpgradeUndernames;\n"],"names":["getTransactionDescription","workflowName","params","ARNS_INTERACTION_TYPES","useIncreaseUndernameCost","name","quantity","arioProcessId","arioContract","useGlobalState","useQuery","UpgradeUndernames","isMobile","useIsMobile","location","useLocation","navigate","useNavigate","arioTicker","dispatchTransactionState","useTransactionState","newUndernameCount","setNewUndernameCount","reactExports","domainData","useDomainInfo","fee","lowerCaseDomain","arnsRecord","antContract","undernameCount","jsxRuntimeExports","Loader","Counter","MAX_UNDERNAME_COUNT","TransactionCost","mARIOToken","WarningCard","SvgInfo","WorkflowButtons","increaseUndernamePayload"],"mappings":"yjBAEA,SAAAA,EAAA,CAAA,aAAAC,EACA,GAAAC,CAEA,EAAA,CAGA,OAAAD,EAAA,CAAA,KAAAE,EAAA,oBAEA,MAAA,yCAAAD,EAAA,UAAA,WAAA,KAAAC,EAAA,aACA,KAAAA,EAAA,WAEA,MAAA,6CAAAD,EAAA,UAAA,YAAA,QAEA,MAAA,CAEA,CCdA,SAAAE,EAAA,CAAA,KAAAC,EACA,SAAAC,CAEA,EAAA,CAIA,KAAA,CAAA,CAAA,cAAAC,EAAA,aAAAC,CAAA,CAAA,EAAAC,EAAA,EACA,OAAAC,EAAA,CAAA,SAAA,CACA,wBACAJ,EACAC,EAAA,SAAA,EACAF,CACA,EACA,QAAA,SAEA,MAAAG,EAAA,aAAA,CAAA,OAAA,2BACA,SAAAF,EACA,KAAAD,CACA,CAAA,EAEA,UAAA,IAAA,GAAA,CACA,CAAA,CAEA,CCJA,SAAAM,GAAA,CACA,MAAAC,EAAAC,EAAA,EACAC,EAAAC,EAAA,EACAC,EAAAC,EAAA,EACA,CAAA,CAAA,WAAAC,EAAA,cAAAX,CAAA,CAAA,EAAAE,EAAA,EACAJ,EAAAS,EAAA,SAAA,MAAA,GAAA,EAAA,GAAA,EAAA,EACA,CAAA,CAAAK,CAAA,EAAAC,EAAA,EACA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,SAAA,CAAA,EACA,CAAA,KAAAC,CAAA,EAAAC,EAAA,CAAA,OAAApB,CAAA,CAAA,EAEA,CAAA,KAAAqB,CAAA,EAAAtB,EAAA,CAAA,KAAAuB,EAAAtB,GAAA,EAAA,EACA,SAAAgB,CACA,CAAA,EAEA,CAAA,WAAAO,EACA,WAAAC,EACA,eAAAC,CACA,EAAAN,GAAA,CAAA,EAEA,MAAA,CAAAI,GAAA,CAAAC,GAAA,CAAAxB,EACA0B,EAAA,IAAA,MAAA,CAAA,UAAA,cAAA,SAAAA,EAAA,IAAAC,EAAA,CAAA,KAAA,GAAA,QAAA,uBAAA,CAAA,CAAA,CAAA,EAOAD,EAAA,IAAA,MAAA,CAAA,UAAA,cAAA,SAAAA,EAAA,KAAA,MAAA,CAAA,UAAA,mBAAA,MAAA,CAAA,SAAA,QAAA,EAAA,SAAA,CAGAA,EAAA,IAAA,KAAA,CAAA,UAAA,yBAAA,SAAA,qBAAA,CAAA,EAAAA,EAAA,KACA,MAAA,CAAA,UAAA,cACA,MAAA,CACA,eAAA,gBACA,OAAA,8BACA,QAAA,YACA,aAAA,uBACA,cAAAnB,EAAA,SAAA,MACA,IAAA,MACA,EACA,SAAA,CAEAmB,EAAA,KAAA,MAAA,CAAA,UAAA,mBACA,MAAA,CAAA,SAAA,OAAA,MAAA,cAAA,IAAA,KAAA,EACA,SAAA,CAEAA,EAAA,KAAA,OAAA,CAAA,UAAA,mBACA,MAAA,CAAA,IAAA,MAAA,WAAA,QAAA,EACA,SAAA,CACA,oBAAA,IACAA,EAAA,IAAA,OAAA,CAAA,UAAA,QAAA,SAAAH,EAAA,cAAA,CAAA,EACAG,EAAA,KAAA,OAAA,CAAA,UAAA,sBAAA,MAAA,CAAA,EAAA,SAAA,CACA,IAAAV,CACA,CAAA,CAAA,CACA,CAAA,CAAA,EACAU,EAAA,KAAA,OAAA,CAAA,UAAA,YAAA,SAAA,CACA,SAAAA,EAAA,KAAA,OAAA,CAAA,UAAA,QAAA,SAAA,CAEA,IAAAD,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CACA,CAAA,CAAA,EACAC,EAAA,IACAE,EAAA,CAAA,SAAAC,EAAAN,EAAA,eACA,SAAA,EACA,MAAAP,EACA,SAAAC,EACA,eAAA,CACA,MAAA,cACA,eAAA,SACA,WAAA,QACA,EACA,WAAA,CACA,WAAA,iBACA,MAAA,OACA,OAAA,OACA,WAAA,SACA,eAAA,SACA,OAAA,8BACA,aAAA,uBACA,OAAA,WACA,SAAA,MACA,EACA,SAAA,EACA,CAAA,CACA,CAAA,CAAA,EACAS,EAAA,IACAI,EAAA,CAAA,gBAAA,CACA,WAAA,SACA,eAAA,SACA,OAAA,MACA,EACA,WAAA,GACA,IAAA,CACA,CAAAjB,CAAA,EAAAG,IAAA,EAAA,EAAAK,EAAA,IAAAU,EAAAV,CAAA,EAAA,OAAA,EAAA,QAAA,EAAA,OAMA,GAAA,CACA,EACA,KAAAK,EAAA,IAAA,MAAA,CAAA,SAAAA,EAAA,IAGAM,EAAA,CAAA,aAAA,CACA,QAAA,OACA,SAAA,OACA,WAAA,QACA,EACA,WAAAN,EAAA,IAAAO,EAAA,CAAA,MAAA,OAAA,KAAA,eAAA,CAAA,EACA,KAAAtC,EAAA,CAEA,aAAAG,EAAA,oBACA,WAAAe,CACA,CAAA,GAAA,EACA,CAAA,CAAA,CAAA,CAGA,CAAA,EAEAa,EAAA,IACAQ,EAAA,CAAA,SAAA,SACA,SAAA,UACA,OAAA,IAAAvB,EAAA,iBAAAW,EAAAtB,CAAA,CAAA,EAAA,EACA,OAAA,CAAAqB,GAAAA,EAAA,EAAA,OAAA,IAAA,CAKA,MAAAc,EAAA,CAAA,KAAAb,EAAAtB,CAAA,EACA,IAAAgB,EACA,OAAAO,EAAA,eACA,UAAAA,EAAA,SACA,EAEAT,EAAA,CAAA,KAAA,qBACA,QAAA,CACA,QAAAZ,EACA,aAAA,yBACA,GAAAiC,EACA,iBAAA,IAAAJ,EAAAV,CAAA,EAAA,OAAA,EAAA,QAAA,CACA,CACA,CAAA,EAEAP,EAAA,CAAA,KAAA,qBACA,QAAAhB,EAAA,mBACA,CAAA,EAEAgB,EAAA,CAAA,KAAA,kBACA,QAAAhB,EAAA,mBACA,CAAA,EAGAa,EAAA,sBAAA,CAAA,MAAA,iBAAAW,EACAtB,CACA,CAAA,qBACA,CAAA,CACA,EACA,gBAAA,CAEA,SAAA,QACA,QAAA,YACA,EACA,gBAAA,CACA,SAAA,QACA,QAAA,YACA,CACA,CAAA,CACA,CAAA,CAAA,CAAA,CAAA,CAIA"}