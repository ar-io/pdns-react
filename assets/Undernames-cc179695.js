import{r as t,z as te,B as se,aN as re,aO as G,aP as $,e as W,j as e,F as oe,V as X,aQ as ie,H as Y,aR as le,aS as de,T as Q,Z as ce,Y as H,X as ue,E as q,aT as xe,aU as me,a1 as ae,A as M,ab as he,aV as J,aK as ge,aW as pe,aX as fe,aY as Ce,aZ as we,$ as O,N as Se,a as ve,u as ye,ae as Ne,b as be,O as K,a2 as je,L as Ie,a_ as Te,P as Ee,a4 as Re}from"./index-7431f6f4.js";import{u as Ae,T as De,a as Le}from"./TransactionSuccessCard-d37ab420.js";import{W as ke}from"./WarningCard-7bacc697.js";import"./Pagination-72187916.js";(function(){try{var o=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},l=new Error().stack;l&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[l]="7bed6c10-9087-4225-51fd-bdd38744a86f",o._sentryDebugIdIdentifier="sentry-dbid-7bed6c10-9087-4225-51fd-bdd38744a86f")}catch{}})();const Ve=o=>t.createElement("svg",{width:"current",height:"current",viewBox:"0 0 18 18",fill:"current",xmlns:"http://www.w3.org/2000/svg",...o},t.createElement("path",{d:"M9 0.875C7.39303 0.875 5.82214 1.35152 4.486 2.24431C3.14985 3.1371 2.10844 4.40605 1.49348 5.8907C0.87852 7.37535 0.717618 9.00901 1.03112 10.5851C1.34463 12.1612 2.11846 13.6089 3.25476 14.7452C4.39106 15.8815 5.8388 16.6554 7.4149 16.9689C8.99099 17.2824 10.6247 17.1215 12.1093 16.5065C13.594 15.8916 14.8629 14.8502 15.7557 13.514C16.6485 12.1779 17.125 10.607 17.125 9C17.1227 6.84581 16.266 4.78051 14.7427 3.25727C13.2195 1.73403 11.1542 0.877275 9 0.875ZM11.9422 11.0578C12.0003 11.1159 12.0463 11.1848 12.0777 11.2607C12.1092 11.3366 12.1254 11.4179 12.1254 11.5C12.1254 11.5821 12.1092 11.6634 12.0777 11.7393C12.0463 11.8152 12.0003 11.8841 11.9422 11.9422C11.8841 12.0003 11.8152 12.0463 11.7393 12.0777C11.6634 12.1092 11.5821 12.1253 11.5 12.1253C11.4179 12.1253 11.3366 12.1092 11.2607 12.0777C11.1848 12.0463 11.1159 12.0003 11.0578 11.9422L9 9.88359L6.94219 11.9422C6.88412 12.0003 6.81518 12.0463 6.73931 12.0777C6.66344 12.1092 6.58213 12.1253 6.5 12.1253C6.41788 12.1253 6.33656 12.1092 6.26069 12.0777C6.18482 12.0463 6.11588 12.0003 6.05782 11.9422C5.99975 11.8841 5.95368 11.8152 5.92226 11.7393C5.89083 11.6634 5.87466 11.5821 5.87466 11.5C5.87466 11.4179 5.89083 11.3366 5.92226 11.2607C5.95368 11.1848 5.99975 11.1159 6.05782 11.0578L8.11641 9L6.05782 6.94219C5.94054 6.82491 5.87466 6.66585 5.87466 6.5C5.87466 6.33415 5.94054 6.17509 6.05782 6.05781C6.17509 5.94054 6.33415 5.87465 6.5 5.87465C6.66586 5.87465 6.82492 5.94054 6.94219 6.05781L9 8.11641L11.0578 6.05781C11.1159 5.99974 11.1848 5.95368 11.2607 5.92225C11.3366 5.89083 11.4179 5.87465 11.5 5.87465C11.5821 5.87465 11.6634 5.89083 11.7393 5.92225C11.8152 5.95368 11.8841 5.99974 11.9422 6.05781C12.0003 6.11588 12.0463 6.18482 12.0777 6.26069C12.1092 6.33656 12.1254 6.41788 12.1254 6.5C12.1254 6.58212 12.1092 6.66344 12.0777 6.73931C12.0463 6.81518 12.0003 6.88412 11.9422 6.94219L9.8836 9L11.9422 11.0578Z",fill:"current"})),ee=o=>t.createElement("svg",{width:"current",height:"current",viewBox:"0 0 16 16",fill:"current",xmlns:"http://www.w3.org/2000/svg",...o},t.createElement("path",{d:"M15.5 8C15.5 8.16576 15.4342 8.32473 15.3169 8.44194C15.1997 8.55915 15.0408 8.625 14.875 8.625H8.625V14.875C8.625 15.0408 8.55915 15.1997 8.44194 15.3169C8.32473 15.4342 8.16576 15.5 8 15.5C7.83424 15.5 7.67527 15.4342 7.55806 15.3169C7.44085 15.1997 7.375 15.0408 7.375 14.875V8.625H1.125C0.95924 8.625 0.800269 8.55915 0.683058 8.44194C0.565848 8.32473 0.5 8.16576 0.5 8C0.5 7.83424 0.565848 7.67527 0.683058 7.55806C0.800269 7.44085 0.95924 7.375 1.125 7.375H7.375V1.125C7.375 0.95924 7.44085 0.800269 7.55806 0.683058C7.67527 0.565848 7.83424 0.5 8 0.5C8.16576 0.5 8.32473 0.565848 8.44194 0.683058C8.55915 0.800269 8.625 0.95924 8.625 1.125V7.375H14.875C15.0408 7.375 15.1997 7.44085 15.3169 7.55806C15.4342 7.67527 15.5 7.83424 15.5 8Z",fill:"current"})),_e=o=>t.createElement("svg",{width:"current",height:"current",viewBox:"0 0 24 24",fill:"current",xmlns:"http://www.w3.org/2000/svg",...o},t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 6.0014H16V4.3314C15.9512 2.9985 14.833 1.95641 13.5 2.0014H10.5C9.16696 1.95642 8.04885 2.9985 8 4.3314V6.0014H3C2.44771 6.0014 2 6.44912 2 7.0014C2 7.55369 2.44771 8.0014 3 8.0014H4V19.0014C4 20.6583 5.34315 22.0014 7 22.0014H17C18.6569 22.0014 20 20.6583 20 19.0014V8.0014H21C21.5523 8.0014 22 7.55369 22 7.0014C22 6.44912 21.5523 6.0014 21 6.0014ZM10 4.33C10 4.17 10.21 4 10.5 4H13.5C13.79 4 14 4.17 14 4.33V6H10V4.33ZM17 20C17.5523 20 18 19.5523 18 19V8H6V19C6 19.5523 6.44771 20 7 20H17ZM9 17C9.55229 17 10 16.5523 10 16V12C10 11.4477 9.55229 11 9 11C8.44771 11 8 11.4477 8 12V16C8 16.5523 8.44771 17 9 17ZM16 16C16 16.5523 15.5523 17 15 17C14.4477 17 14 16.5523 14 16V12C14 11.4477 14.4477 11 15 11C15.5523 11 16 11.4477 16 12V16Z",fill:"current"}));function Me({antId:o,closeModal:l,payloadCallback:C}){const[{arweaveDataProvider:h}]=te(),c=se(),i=t.useRef(null),u=t.useRef(null),N=t.useRef(null),[d,w]=t.useState(""),[T,g]=t.useState(re.toString()),[p,f]=t.useState(G),[E,k]=t.useState({}),[S,b]=t.useState($);t.useEffect(()=>{var n;D(),(n=N.current)==null||n.focus()},[o.toString()]);async function D(){try{const n=await h.getRecords({filters:{processId:[o]}});k(n);const y=Object.keys(n).length?Math.min(...Object.keys(n).map(R=>R.length)):0;b($-y)}catch(n){W.emit("error",n)}}function V(){C({subDomain:d,transactionId:T,ttlSeconds:p})}function v(n,y){return Object.keys(y).filter(R=>n.length+R.length>$)}return e.jsx("div",{className:"modal-container",style:c?{padding:"none"}:{},children:e.jsx(oe,{title:e.jsx("h2",{className:"white text-xl",children:"Add Undername"}),body:e.jsx("form",{children:e.jsx("div",{className:"flex flex-column",style:{fontSize:"14px",width:"500px"},children:e.jsxs("div",{className:"flex flex-column",style:{paddingBottom:"30px"},children:[e.jsxs("div",{className:"flex flex-column",style:{gap:"15px"},children:[e.jsx("span",{className:"grey",children:"Undername Title:"}),e.jsxs("span",{className:"flex flex-row",style:{position:"relative"},children:[e.jsx(X,{ref:N,inputClassName:"name-token-input white",inputCustomStyle:{paddingLeft:"10px",fontSize:"14px",paddingRight:"80px"},wrapperCustomStyle:{width:"100%",border:"1px solid var(--text-faded)",borderRadius:"var(--corner-radius)"},showValidationIcon:!0,showValidationOutline:!0,showValidationChecklist:!0,validationListStyle:{display:"none"},value:d,setValue:n=>w(n),catchInvalidInput:!1,maxCharLength:S,customPattern:ie,validationPredicates:{[Y.UNDERNAME]:{fn:n=>le(n)},"Dashes and Underscores cannot be leading or trailing":{fn:n=>de(n)}}},"undername"),e.jsxs("span",{className:"flex flex-row grey",style:{position:"absolute",top:"0px",bottom:"0px",right:d.length?"35px":"10px",width:"fit-content"},children:[d.length," / ",S]})]}),v(d,E).length?e.jsx(ke,{text:e.jsxs("span",{children:["This ANT has"," ",e.jsx(Q,{title:e.jsx("div",{className:"flex flex-column",style:{padding:"5px",gap:"5px",boxSizing:"border-box"},children:v(d,E).map(n=>e.jsx("span",{children:n},n))}),color:"var(--card-bg)",placement:"top",showArrow:!0,children:e.jsxs("span",{className:"underline bold",children:[v(d,E).length," ","name",v(d,E).length>1?"s":""]})})," ","that will not support this undername as it is over their supported length."]})}):e.jsx(e.Fragment,{})]}),e.jsxs("div",{className:"flex flex-column",style:{gap:"15px"},children:[e.jsx("span",{className:"grey",children:"Target ID:"}),e.jsx(X,{ref:i,inputClassName:"name-token-input white",inputCustomStyle:{paddingLeft:"10px",fontSize:"14px",paddingRight:"40px"},wrapperCustomStyle:{position:"relative",border:"1px solid var(--text-faded)",borderRadius:"var(--corner-radius)"},showValidationIcon:!0,showValidationOutline:!0,showValidationChecklist:!0,validationListStyle:{display:"none"},maxCharLength:43,value:T,setValue:g,catchInvalidInput:!0,customPattern:ce,validationPredicates:{[Y.ARWEAVE_ID]:{fn:n=>h.validateArweaveId(n)}}},"targetId")]}),e.jsxs("div",{className:"flex flex-column",style:{gap:"15px"},children:[e.jsx("span",{className:"grey",children:"TTL:"}),e.jsx(X,{ref:u,inputClassName:"name-token-input white",inputCustomStyle:{paddingLeft:"10px",fontSize:"14px"},wrapperCustomStyle:{position:"relative",border:"1px solid var(--text-faded)",borderRadius:"var(--corner-radius)",maxWidth:"130px"},showValidationIcon:!0,showValidationOutline:!0,showValidationChecklist:!0,type:"number",minNumber:G,maxNumber:H,validationListStyle:{display:"none"},maxCharLength:H.toString().length,value:p,setValue:n=>f(+n),catchInvalidInput:!0,customPattern:new RegExp(`^[0-9]{1,${H.toString().length}}$`),validationPredicates:{[Y.VALID_TTL]:{fn:n=>ue(+n)}}},"ttlSeconds")]})]})})}),onCancel:l,onClose:l,onNext:q(T)&&xe(d)&&p>=G&&p<=H?()=>V():void 0,footer:e.jsx("div",{className:"flex"}),nextText:"Next",cancelText:"Cancel"})})}function Oe(o,l){const[{gateway:C}]=te(),[{domains:h}]=me(),[{walletAddress:c}]=ae(),[i,u]=t.useState(!0),[N,d]=t.useState("name"),[w,T]=t.useState(),[g,p]=t.useState([]),[f,E]=t.useState([]),[k,S]=t.useState([]),[b,D]=t.useState(!0),[V,v]=t.useState(),n=t.useRef(null),[y,R]=t.useState(""),[j,I]=t.useState(!1),[U,z]=t.useState(!1);t.useEffect(()=>{!o&&!l||_(o,l)},[o,l,c]),t.useEffect(()=>{E(L())},[U]),t.useEffect(()=>{if(y){const m=g.filter(s=>s.name.toLowerCase().startsWith(y.toLowerCase()));S(m)}else S([])},[y,c,l]);function L(){return[{title:e.jsxs("button",{className:"flex-row pointer grey",style:{gap:"0.5em"},onClick:()=>d("name"),children:[e.jsx("span",{children:"Undername"}),N==="name"?e.jsx(J,{width:10,height:10,fill:"var(--text-grey)",style:i?{}:{transform:"rotate(180deg)"}}):e.jsx(e.Fragment,{})]}),dataIndex:"name",key:"name",align:"left",width:"18%",className:"grey manage-assets-table-header",ellipsis:!0,onHeaderCell:()=>({onClick:()=>{g.sort((s,r)=>i?r.name.localeCompare(s.name):s.name.localeCompare(r.name)),p([...g]),u(!i)}}),render:(s,r)=>e.jsx(ge,{to:`https://${s}_${r.domain}.${C}`,rel:"noreferrer",target:"_blank",className:"link","aria-disabled":r.domain==null,children:s})},{title:e.jsxs("button",{className:"flex-row pointer grey",style:{gap:"0.5em"},onClick:()=>d("targetID"),children:[e.jsx("span",{children:"Target ID"}),N==="targetID"?e.jsx(J,{width:10,height:10,fill:"var(--text-grey)",style:i?{}:{transform:"rotate(180deg)"}}):e.jsx(e.Fragment,{})]}),dataIndex:"targetID",key:"targetID",align:"left",width:"18%",className:"grey manage-assets-table-header",render:s=>s==="N/A"||!q(s)?s:e.jsx(pe,{id:new M(s),characterCount:12,shouldLink:!0,type:fe.TRANSACTION}),onHeaderCell:()=>({onClick:()=>{g.sort((s,r)=>i?s.targetID.localeCompare(r.targetID):r.targetID.localeCompare(s.targetID)),p([...g]),u(!i)}})},{title:e.jsxs("button",{className:"flex-row pointer grey",style:{gap:"0.5em"},onClick:()=>d("ttlSeconds"),children:[e.jsx("span",{children:"TTL"}),N==="ttlSeconds"?e.jsx(J,{width:10,height:10,fill:"var(--text-grey)",style:i?{}:{transform:"rotate(180deg)"}}):e.jsx(e.Fragment,{})]}),dataIndex:"ttlSeconds",key:"ttlSeconds",align:"left",width:"18%",className:"grey manage-assets-table-header",render:s=>s,onHeaderCell:()=>({onClick:()=>{g.sort((s,r)=>i?s.ttlSeconds-r.ttlSeconds:r.ttlSeconds-s.ttlSeconds),p([...g]),u(!i)}})},{title:e.jsxs("div",{className:"flex flex-row center undername-search-wrapper",style:{gap:"1px",justifyContent:"flex-end",boxSizing:"border-box"},children:[e.jsx("button",{className:"flex button center pointer",style:{zIndex:10},onClick:()=>I(!j),children:e.jsx(Ce,{width:"16px",height:"16px",fill:j?"var(--text-white)":"var(--text-grey)"})}),j?e.jsxs("span",{className:"flex flex-row center",style:{gap:"1px",justifyContent:"flex-end",width:"fit-content",boxSizing:"border-box"},children:[e.jsx(X,{ref:n,value:y,setValue:s=>R(s),catchInvalidInput:!0,showValidationIcon:!1,placeholder:"Search for a name",maxCharLength:61,wrapperCustomStyle:{position:"relative",boxSizing:"border-box"},inputCustomStyle:{width:"100%",minWidth:"100px",overflow:"hidden",fontSize:"13px",outline:"none",color:"white",alignContent:"center",borderBottom:"none",boxSizing:"border-box",background:"transparent",borderRadius:"var(--corner-radius)",border:"none",paddingRight:"10px"},customPattern:we,validationPredicates:{}}),e.jsx("button",{className:"flex button center pointer",onClick:()=>{R(""),I(!1)},children:e.jsx(Ve,{width:"18px",height:"18px",fill:"var(--text-grey)"})})]}):e.jsx(e.Fragment,{})]}),className:"manage-assets-table-header",render:(s,r)=>e.jsx("div",{className:"flex flex-row action-buttons fade-in",style:{gap:"10px",justifyContent:"flex-end"},children:U&&e.jsxs(e.Fragment,{children:[e.jsx(Q,{trigger:["hover"],title:"Edit",color:"var(--card-bg)",placement:"top",rootClassName:"notification-tooltip",children:e.jsx("button",{className:"button pointer",onClick:()=>{T(r),v(O.EDIT)},children:e.jsx(Se,{width:18,height:18,fill:"var(--text-grey)"})})}),e.jsx(Q,{trigger:["hover"],title:"Delete",color:"#222224",placement:"top",rootClassName:"notification-tooltip",children:e.jsx("button",{className:"button pointer",onClick:()=>{T(r),v(O.REMOVE)},children:e.jsx(_e,{width:18,height:18,fill:"var(--text-grey)"})})})]})}),align:"right",width:"10%",key:"action",dataIndex:"action"}]}async function _(m,s){let r;if(m)r=m;else if(s){const a=h[s];a&&(r=new M(a.processId))}if(!r){D(!1);return}D(!0);const F=Object.keys(h).find(a=>h[a].processId===(r==null?void 0:r.toString())),P=await he.init({processId:r.toString()}).getState(),Z=Object.entries(P.Records).map(([a,x])=>a==="@"?void 0:{domain:F,name:a,targetID:x.transactionId,ttlSeconds:x.ttlSeconds,status:0,key:a}).filter(a=>a!==void 0).sort((a,x)=>a.status-x.status);p(Z);const B=c?P.Controllers.includes(c.toString())||P.Owner===c.toString():!1;z(B),D(!1)}return{isLoading:b,columns:f,rows:k.length?k:g,sortField:N,sortAscending:i,selectedRow:w,action:V,setAction:m=>v(m),refresh:()=>_(o,l)}}function He(){const o=ve(),{id:l,name:C}=ye(),{data:h}=Ae({domain:C,antId:l?new M(l):void 0}),[{walletAddress:c,wallet:i}]=ae(),[u,N]=t.useState(),[d,w]=t.useState(),{isLoading:T,columns:g,rows:p,selectedRow:f,sortAscending:E,sortField:k,action:S,setAction:b,refresh:D}=Oe(u,C),[V,v]=t.useState(!0),[n,y]=t.useState(1),[R,j]=Ne(),[I,U]=t.useState(),[z,L]=t.useState(),[_,m]=t.useState(),[{interactionResult:s,workflowName:r},F]=be();t.useEffect(()=>{if(!l&&!C){W.emit("error",new Error("Missing ANT transaction ID.")),o("/manage/ants");return}v(T),w(f),V&&Z(),b(S),h.owner&&h.controllers&&P(h.owner,h.controllers,c==null?void 0:c.toString()).then(a=>U(a)),S===O.REMOVE&&u&&(f!=null&&f.name)&&(L({subDomain:f==null?void 0:f.name}),m(K.REMOVE_RECORD))},[l,C,E,k,f,S,p,c]);async function P(a,x,A){if(a===A)return"owner";if(A&&x.includes(A))return"controller"}async function Z(){try{let a;if(q(l))a=new M(l);else if(C){const x=h.arnsRecord;a=new M(x==null?void 0:x.processId)}if(!a)throw new Error("Unable to load undernames, cannot resolve ANT ID.");N(a)}catch(a){W.emit("error",a),o("/manage/ants")}}async function B({payload:a,workflowName:x,processId:A}){try{if(!A)throw new Error("Unable to interact with ANT contract - missing ID.");if(!(i!=null&&i.arconnectSigner)||!c)throw new Error("Unable to interact with ANT contract - missing signer.");await Re({processId:A,payload:a,workflowName:x,signer:i==null?void 0:i.arconnectSigner,owner:c==null?void 0:c.toString(),dispatch:F})}catch(ne){W.emit("error",ne)}finally{L(void 0),m(void 0),D()}}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"page",children:e.jsxs("div",{className:"flex-column",children:[s?e.jsx(De,{txId:new M(s.id),close:()=>{F({type:"reset"})},title:`${r} completed`}):e.jsx(e.Fragment,{}),e.jsx("div",{className:"flex flex-justify-between",children:e.jsxs("div",{className:"flex flex-row",style:{justifyContent:"space-between"},children:[e.jsx("h2",{className:"white text-[2rem]",children:"Manage Undernames"}),I?e.jsxs("button",{disabled:I===void 0,className:"button-secondary center",style:{gap:"10px",padding:"9px 12px",fontSize:"14px",textAlign:"center"},onClick:()=>j({modal:O.CREATE}),children:[e.jsx(ee,{width:"16px",height:"16px",fill:"var(--accent)"}),"Add Undername"]}):e.jsx(e.Fragment,{})]})}),V?e.jsx("div",{className:"flex center",style:{paddingTop:"10%",justifyContent:"center"},children:e.jsx(je,{message:"Loading undernames..."})}):e.jsx(Le,{onRow:()=>({className:"hovered-row"}),prefixCls:"manage-undernames-table",bordered:!1,scroll:{x:!0},columns:g,dataSource:p,pagination:{position:["bottomCenter"],rootClassName:"table-pagination",itemRender:(a,x,A)=>Ie({page:a,type:x,originalElement:A,currentPage:n}),onChange:a=>y(a),showPrevNextJumpers:!0,showSizeChanger:!1,current:n},locale:{emptyText:e.jsxs("div",{className:"flex flex-column center",style:{padding:"100px",boxSizing:"border-box",width:"100%"},children:[e.jsx("span",{className:"white bold",style:{fontSize:"16px"},children:"No Undernames Found"}),e.jsx("span",{className:"grey",style:{fontSize:"13px",maxWidth:"400px"},children:"Arweave Name Tokens (ANTs) provide ownership and control of ArNS names. With ANTs you can easily manage, transfer, and adjust your domains, as well as create undernames."}),e.jsx("div",{className:"flex flex-row center",style:{gap:"16px"},children:I?e.jsxs("button",{className:"button-secondary center",style:{gap:"10px",padding:"9px 12px",fontSize:"14px",textAlign:"center"},onClick:()=>j({modal:O.CREATE}),children:[e.jsx(ee,{width:"16px",height:"16px",fill:"var(--accent)"}),"Add Undername"]}):e.jsx(e.Fragment,{})})]})}})]})}),R.has("modal")&&u&&I?e.jsx(Me,{closeModal:()=>{j({}),w(void 0),j({})},payloadCallback:a=>{L(a),m(K.SET_RECORD),b(void 0),w(void 0),j({})},antId:u}):e.jsx(e.Fragment,{children:" "}),S===O.EDIT&&u&&(d!=null&&d.name)&&I?e.jsx(Te,{closeModal:()=>{b(void 0),w(void 0)},payloadCallback:a=>{L(a),m(K.EDIT_RECORD),b(void 0),w(void 0)},antId:u,undername:d.name}):e.jsx(e.Fragment,{children:" "}),u&&z&&_&&I?e.jsx(Ee,{interactionType:_,confirm:()=>B({payload:z,workflowName:_,processId:u}),cancel:()=>{L(void 0),m(void 0),w(void 0),b(void 0)}}):e.jsx(e.Fragment,{})]})}export{He as default};
//# sourceMappingURL=Undernames-cc179695.js.map
