{"version":3,"file":"ManageDomain-da86ff5d.js","sources":["../../src/components/pages/ManageDomain/ManageDomain.tsx"],"sourcesContent":["import TransactionSuccessCard from '@src/components/cards/TransactionSuccessCard/TransactionSuccessCard';\nimport { AntLogoIcon } from '@src/components/data-display/AntLogoIcon';\nimport DomainSettings from '@src/components/forms/DomainSettings/DomainSettings';\nimport useDomainInfo from '@src/hooks/useDomainInfo';\nimport { usePrimaryName } from '@src/hooks/usePrimaryName';\nimport { useGlobalState, useModalState, useWalletState } from '@src/state';\nimport { useTransactionState } from '@src/state/contexts/TransactionState';\nimport { Star } from 'lucide-react';\nimport { useEffect, useState } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\n\nimport { decodeDomainToASCII } from '../../../utils';\nimport './styles.css';\n\nfunction ManageDomain() {\n  const { name } = useParams();\n  const navigate = useNavigate();\n  const [{ arioProcessId }] = useGlobalState();\n  const [{ workflowName, interactionResult }, dispatchTransactionState] =\n    useTransactionState();\n  const [, dispatchModalState] = useModalState();\n  const { data: primaryNameData } = usePrimaryName();\n  const { data: domainData } = useDomainInfo({ domain: name });\n  const [{ walletAddress }] = useWalletState();\n\n  const isOwner = walletAddress\n    ? walletAddress.toString() === domainData?.info?.Owner\n    : false;\n\n  const [logoId, setLogoId] = useState<string | undefined>();\n\n  useEffect(() => {\n    if (!name) {\n      navigate('/manage/names');\n      return;\n    }\n    // Reset transaction state on unmount - clears transaction success banner\n    return () => {\n      dispatchTransactionState({ type: 'reset' });\n    };\n  }, [name]);\n\n  return (\n    <>\n      <div\n        className=\"page\"\n        style={{ gap: '0px', paddingTop: '10px', paddingBottom: '10px' }}\n      >\n        {interactionResult && (\n          <div className=\"mb-4 w-full\">\n            <TransactionSuccessCard\n              txId={interactionResult.id}\n              title={`${workflowName} completed`}\n              close={() => {\n                dispatchTransactionState({\n                  type: 'reset',\n                });\n              }}\n            />\n          </div>\n        )}\n        <div\n          className=\"flex flex-row\"\n          style={{\n            justifyContent: 'space-between',\n            width: '100%',\n          }}\n        >\n          <h2 className=\"flex white center\" style={{ gap: '16px' }}>\n            <AntLogoIcon id={logoId} />\n            {decodeDomainToASCII(name!)}\n            <Star\n              className={\n                (name == primaryNameData?.name\n                  ? 'text-primary fill-primary'\n                  : 'text-grey') + ` w-[18px]`\n              }\n            />\n          </h2>\n          {isOwner && (\n            <button\n              className={\n                'flex text-primary bg-primary-thin max-w-fit rounded border border-primary px-3 py-1 gap-3 text-[16px] items-center'\n              }\n              onClick={() => {\n                if (!name) return;\n                if (primaryNameData?.name === name) {\n                  // remove primary name payload\n                  dispatchTransactionState({\n                    type: 'setTransactionData',\n                    payload: {\n                      names: [name],\n                      arioProcessId,\n                      assetId: '',\n                      functionName: 'removePrimaryNames',\n                    },\n                  });\n                } else {\n                  dispatchTransactionState({\n                    type: 'setTransactionData',\n                    payload: {\n                      name,\n                      arioProcessId,\n                      assetId: arioProcessId,\n                      functionName: 'primaryNameRequest',\n                    },\n                  });\n                }\n\n                dispatchModalState({\n                  type: 'setModalOpen',\n                  payload: { showPrimaryNameModal: true },\n                });\n              }}\n            >\n              <Star className={`w-[16px]`} />{' '}\n              {name == primaryNameData?.name\n                ? 'Remove Primary'\n                : 'Make Primary'}\n            </button>\n          )}\n        </div>\n        <DomainSettings\n          domain={name}\n          setLogo={(id?: string) => setLogoId(id)}\n        />\n      </div>\n    </>\n  );\n}\n\nexport default ManageDomain;\n"],"names":["ManageDomain","name","useParams","navigate","useNavigate","arioProcessId","useGlobalState","workflowName","interactionResult","dispatchTransactionState","useTransactionState","dispatchModalState","useModalState","primaryNameData","usePrimaryName","domainData","useDomainInfo","walletAddress","useWalletState","isOwner","_a","logoId","setLogoId","reactExports","jsxRuntimeExports","TransactionSuccessCard","AntLogoIcon","decodeDomainToASCII","Star","DomainSettings","id"],"mappings":"mnBAcA,SAAAA,GAAA,OACA,KAAA,CAAA,KAAAC,CAAA,EAAAC,EAAA,EACAC,EAAAC,EAAA,EACA,CAAA,CAAA,cAAAC,CAAA,CAAA,EAAAC,EAAA,EACA,CAAA,CAAA,aAAAC,EAAA,kBAAAC,CAAA,EAAAC,CAAA,EAAAC,EAAA,EAEA,CAAA,CAAAC,CAAA,EAAAC,EAAA,EACA,CAAA,KAAAC,CAAA,EAAAC,EAAA,EACA,CAAA,KAAAC,CAAA,EAAAC,EAAA,CAAA,OAAAf,CAAA,CAAA,EACA,CAAA,CAAA,cAAAgB,CAAA,CAAA,EAAAC,EAAA,EAEAC,EAAAF,EAAAA,EAAA,SAAA,MAAAG,EAAAL,GAAA,YAAAA,EAAA,OAAA,YAAAK,EAAA,OAAA,GAIA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,SAAA,EAEA,OAAAA,EAAA,UAAA,IAAA,CACA,GAAA,CAAAtB,EAAA,CACAE,EAAA,eAAA,EACA,MAAA,CAGA,MAAA,IAAA,CACAM,EAAA,CAAA,KAAA,OAAA,CAAA,CAAA,CACA,EAAA,CAAAR,CAAA,CAAA,EAGAuB,EAAA,IAAAA,EAAA,SAAA,CAAA,SAAAA,EAAA,KAEA,MAAA,CAAA,UAAA,OACA,MAAA,CAAA,IAAA,MAAA,WAAA,OAAA,cAAA,MAAA,EACA,SAAA,CAEAhB,GAAAgB,EAAA,IAAA,MAAA,CAAA,UAAA,cAAA,SAAAA,EAAA,IAEAC,EAAA,CAAA,KAAAjB,EAAA,GACA,MAAA,GAAAD,CAAA,aACA,MAAA,IAAA,CAEAE,EAAA,CAAA,KAAA,OACA,CAAA,CACA,CACA,CAAA,CAAA,CAAA,EAEAe,EAAA,KAEA,MAAA,CAAA,UAAA,gBACA,MAAA,CACA,eAAA,gBACA,MAAA,MACA,EACA,SAAA,CAEAA,EAAA,KAAA,KAAA,CAAA,UAAA,oBAAA,MAAA,CAAA,IAAA,MAAA,EAAA,SAAA,CACAA,EAAA,IAAAE,EAAA,CAAA,GAAAL,CAAA,CAAA,EAAAM,EAAA1B,CAAA,EACAuB,EAAA,IACAI,EAAA,CAAA,WAAA3B,IAAAY,GAAA,YAAAA,EAAA,MAAA,4BAAA,aAAA,WAIA,CAAA,CAEA,CAAA,CAAA,EACAM,GAAAK,EAAA,KAEA,SAAA,CAAA,UAAA,qHAEA,QAAA,IAAA,CAGAvB,KACAY,GAAA,YAAAA,EAAA,QAAAZ,EAEAQ,EAAA,CAAA,KAAA,qBACA,QAAA,CACA,MAAA,CAAAR,CAAA,EACA,cAAAI,EACA,QAAA,GACA,aAAA,oBACA,CACA,CAAA,EAGAI,EAAA,CAAA,KAAA,qBACA,QAAA,CACA,KAAAR,EACA,cAAAI,EACA,QAAAA,EACA,aAAA,oBACA,CACA,CAAA,EAIAM,EAAA,CAAA,KAAA,eACA,QAAA,CAAA,qBAAA,EAAA,CACA,CAAA,EACA,EACA,SAAA,CAEAa,EAAA,IAAAI,EAAA,CAAA,UAAA,UAAA,CAAA,EAAA,IAAA3B,IAAAY,GAAA,YAAAA,EAAA,MAAA,iBAAA,cAGA,CAAA,CAAA,CACA,CAAA,CAAA,EAEAW,EAAA,IACAK,EAAA,CAAA,OAAA5B,EACA,QAAA6B,GAAAR,EAAAQ,CAAA,CACA,CAAA,CACA,CAAA,CAAA,CAAA,CAAA,CAIA"}