import{h as K,a as Y,k as Z,l as q,u as J,m as Q,r as c,R as S,A,W as j,X as ee,Y as te,j as e,y as ae,i as C,o as ne,n as se,Z as ie,_ as re,p as oe,e as ce,v as I,L as de,c as le,t as me,$ as ue,a0 as T,a1 as xe,w as ge,x as pe,z as fe}from"./index-5431d9b6.js";import{S as he}from"./HamburgerOutline-6f096ccf.js";(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},g=new Error().stack;g&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[g]="f4472c84-52fa-4354-01e3-7474c4ee6dc6",a._sentryDebugIdIdentifier="sentry-dbid-f4472c84-52fa-4354-01e3-7474c4ee6dc6")}catch{}})();function Ie(){const{name:a}=K(),g=Y(),d=Z(),E=q(),[{arweaveDataProvider:l}]=J(),[{walletAddress:b}]=Q(),[k,R]=c.useState([]),[p,L]=c.useState(!1),[f,_]=c.useState(!1),[M,U]=c.useState(),[i,v]=c.useState(!0);c.useEffect(()=>{if(!a||!b){d("/manage/ants");return}$(b,a)},[a]);async function $(n,m){var D;try{v(!0);const u=await l.getRecord({domain:S(m)}),N=u==null?void 0:u.contractTxId;if(!N)throw Error("This name is not registered");const x=new A(N),[s,F,O]=await Promise.all([l.buildANTContract(x),l.getTransactionStatus(x).then(r=>r[x.toString()].confirmations),l.getPendingContractInteractions(x)]);if(!s.isValid())throw Error("Invalid ANT contract");const t=a?await l.getRecord({domain:S(a)}).catch(()=>{}):void 0;if(!t)throw Error("This name is not registered");const h=t!=null&&t.endTimestamp?j(t.startTimestamp*1e3,t.endTimestamp*1e3):"Indefinite",P=()=>{if(t!=null&&t.endTimestamp){const r=Math.max(1,j(t.startTimestamp*1e3,t.endTimestamp*1e3)),o=r>1?"years":"year";return`${r} ${o}`}return"Indefinite"};L(h&&typeof h=="number"&&h>=ee||h==="Indefinite"),U(t.undernames),_(!!M&&t.undernames>=te);const w={expiryDate:t!=null&&t.endTimestamp?+t.endTimestamp:"Indefinite",status:e.jsx(ae,{confirmations:F}),name:s.name??"N/A",contractTxId:x.toString(),targetID:s.getRecord("@")&&C(s.getRecord("@").transactionId)?s.getRecord("@").transactionId:"N/A",ticker:s.ticker??"N/A",controllers:s.controllers.join(", ")??"N/A",owner:s.owner??"N/A",ttlSeconds:((D=s.getRecord("@"))==null?void 0:D.ttlSeconds)??ne,leaseDuration:`${P()}`,undernames:`${se(s.records)}/${((t==null?void 0:t.undernames)??ie).toLocaleString()}`},z=re(O,w),X=Object.keys(w).reduce((r,o,W)=>{const G=w[o],y=z.find(B=>B.attribute===o),H=y?y.value:G,V={attribute:o,value:H,key:W,interactionType:oe(o),pendingInteraction:y};return r.push(V),r},[]);R(X),v(!1)}catch(u){ce.emit("error",u),d("/manage/names",{state:E.pathname})}}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"page",style:{gap:"30px"},children:[e.jsxs("div",{className:"flex flex-row",style:{justifyContent:"space-between",width:"100%"},children:[e.jsxs("h2",{className:"flex white center",style:{gap:"16px"},children:[e.jsx(he,{width:"20px",height:"20px",fill:"var(--text-white)"}),a]}),e.jsxs("div",{className:"flex flex-row",style:{gap:"20px",width:"fit-content"},children:[e.jsx(I,{trigger:["hover"],title:f?"Max undername support reached":"Increase undername support",color:"#222224",placement:"top",rootClassName:"notification-tooltip",children:e.jsx("button",{disabled:i||f,className:`button-secondary ${i||f?"disabled-button":"hover"}`,style:{padding:i||f?"0px":"9px",gap:"8px",fontSize:"14px",color:"var(--accent)",fontFamily:"Rubik"},onClick:()=>d(`/manage/names/${a}/undernames`),children:"Increase Undernames"})}),e.jsx(I,{trigger:["hover"],title:p?"Max lease duration reached":"Extend lease",color:"#222224",placement:"top",rootClassName:"notification-tooltip",children:e.jsx("button",{disabled:i||p,className:`button-primary ${i||p?"disabled-button":"hover"}`,style:{padding:i||p?"0px":"9px",gap:"8px",fontSize:"14px",color:"var(--text-black)",fontFamily:"Rubik"},onClick:()=>d(`/manage/names/${a}/extend`),children:"Extend Lease"})})]})]}),e.jsx("div",{className:"flex-row center",children:i?e.jsx("div",{className:"flex",style:{padding:"10%"},children:e.jsx(de,{size:80})}):e.jsx(le,{showHeader:!1,style:{width:"100%"},scroll:{x:!0},pagination:!1,prefixCls:"manage-domain-table",columns:[{title:"",dataIndex:"attribute",key:"attribute",align:"left",width:g?"0px":"15%",className:"grey",render:n=>`${me(n)}:`},{title:"",dataIndex:"value",key:"value",align:"left",width:"70%",className:"white",render:(n,m)=>C(n)?e.jsx(ue,{id:new A(n),shouldLink:!0,copyButtonStyle:{display:"none"},type:m.attribute==="targetID"?T.TRANSACTION:m.attribute==="contractTxId"?T.CONTRACT:T.ADDRESS}):m.attribute==="expiryDate"&&typeof n=="number"?e.jsx("span",{style:{color:n*1e3>Date.now()?"var(--success-green)":n*1e3+xe*1e3<Date.now()?"var(--accent)":"var(--error-red)"},children:Intl.DateTimeFormat("en-US").format(n*1e3)}):n},{title:"",dataIndex:"pendingInteraction",key:"pendingInteraction",align:"left",width:"2%",className:"white",render:n=>n?e.jsx(I,{placement:"right",title:e.jsxs(ge,{className:"link white text underline",to:`https://viewblock.io/arweave/tx/${n.id}`,target:"_blank",children:["There is a pending transaction modifying this field.",e.jsx(pe,{height:12,width:12,fill:"var(--text-white)"})]}),showArrow:!0,overlayStyle:{maxWidth:"fit-content"},children:e.jsx(fe,{height:20,width:20,fill:"var(--accent)"})}):e.jsx(e.Fragment,{})}],dataSource:k})})]})})}export{Ie as default};
//# sourceMappingURL=ManageDomain-1254acb6.js.map
