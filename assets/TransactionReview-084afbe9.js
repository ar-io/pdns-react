import{by as l,j as e,a as W,d as k,aT as P,aU as B,c as U,aK as M,r as o,c2 as S,c3 as L,bz as O,bF as F,aR as G,bG as H,c4 as z,c5 as X,aX as Y,a_ as K}from"./index-0dbebcee.js";import{A as q}from"./ANTCard-b991e8b9.js";import{W as J}from"./WarningCard-453b3682.js";import{S as Q}from"./StepProgressBar-f8addc99.js";import{g as y}from"./transaction-descriptions-750a6d91.js";import"./useBreakpoint-37520d2f.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},n=new Error().stack;n&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[n]="d2e0f179-d83a-4c4b-2db0-d5fa3558d3a8",t._sentryDebugIdIdentifier="sentry-dbid-d2e0f179-d83a-4c4b-2db0-d5fa3558d3a8")}catch{}})();function E({workflowName:t,...n}){switch(t){case l.INCREASE_UNDERNAMES:case l.EXTEND_LEASE:return e.jsx("h1",{className:"flex white text-[2rem]",style:{width:"100%",paddingBottom:"30px"},children:"Review"});case l.UPGRADE_NAME:case l.BUY_RECORD:return"Review your Purchase";default:return}}function se(){var w;const t=W(),[{arioTicker:n,arioContract:f,arioProcessId:m,aoNetwork:b,aoClient:u}]=k(),[{arnsEmitter:N},I]=P(),[{walletAddress:c,wallet:p}]=B(),[{workflowName:s,interactionType:d,transactionData:a,interactionResult:r},T]=U(),j=M(),[x,v]=o.useState(),[i,A]=o.useState(S(d)),[g,C]=o.useState(E({workflowName:s})),[h,R]=o.useState(y({workflowName:s,arioTicker:n}));o.useEffect(()=>{if(!a&&!s){t("/");return}v(L({interactionType:d,transactionData:{...a,deployedTransactionId:r==null?void 0:r.id}})),R(y({workflowName:s,arioTicker:n})),A(S(d)),C(E({workflowName:s}))},[a,r,s,d,c]),o.useEffect(()=>{r!=null&&r.id&&t("/transaction/complete")},[r,t]);async function _(){try{if(!(f instanceof z))throw new Error("Wallet must be connected to dispatch transactions.");if(!a||!s)throw new Error("Transaction data is missing");if(!c)throw new Error("Wallet address is missing");await X({arioContract:f,workflowName:s,payload:a,owner:c,processId:m,dispatch:T,signer:p==null?void 0:p.contractSigner,ao:u,scheduler:b.SCHEDULER})}catch(D){Y.emit("error",D)}finally{c&&K({ao:u,emitter:N,dispatch:I,arioProcessId:m,walletAddress:c})}}return x?e.jsx("div",{className:"page",children:e.jsxs("div",{className:"flex flex-column center",style:j?{}:{gap:"0px",maxWidth:"900px",width:"100%"},children:[i&&i.length?e.jsx("div",{className:"flex flex-row",style:{marginBottom:"20px",width:"100%"},children:e.jsx(Q,{stage:3,stages:i})}):e.jsx(e.Fragment,{}),typeof g=="string"?e.jsx("div",{className:"flex flex-row text-large white bold center",style:{height:"100%",padding:"50px 0px",borderTop:i!=null&&i.length?"solid 1px var(--text-faded)":""},children:g}):g,e.jsx(q,{...x,bordered:!0,compact:!0,overrides:{...x.overrides,targetId:(w=a==null?void 0:a.targetId)==null?void 0:w.toString()}}),e.jsx(F,{feeWrapperStyle:{alignItems:"center",justifyContent:"center",height:"100%"},fee:{[n]:a==null?void 0:a.interactionPrice},info:h&&e.jsx("div",{children:e.jsx(J,{wrapperStyle:{padding:"10px",fontSize:"14px",alignItems:"center"},customIcon:e.jsx(G,{width:"20px",fill:"var(--accent)"}),text:h})})}),e.jsx("div",{className:"flex",style:{marginTop:20,width:"100%",justifyContent:"flex-end"},children:e.jsx(H,{onNext:()=>_(),onBack:()=>t(-1),backText:"Back",nextText:"Confirm"})})]})}):e.jsx(O,{loading:!0,message:"Loading transaction data..."})}export{se as default};
//# sourceMappingURL=TransactionReview-084afbe9.js.map
