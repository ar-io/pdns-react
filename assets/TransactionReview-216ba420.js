import{bQ as l,j as e,a as _,d as B,b5 as M,g as W,c as F,aM as O,r as c,cj as E,ck as U,cl as L,cm as H,bR as q,cn as G,bX as X,co as Y,cp as Q,bg as z,bh as J}from"./index-87bb2c1a.js";import{A as K}from"./ANTCard-fb6e9914.js";import{S as V}from"./StepProgressBar-b597ff9b.js";import"./useBreakpoint-c8b9ea2c.js";(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new Error().stack;o&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[o]="ae864d27-24f6-4265-c547-f737a601e87a",a._sentryDebugIdIdentifier="sentry-dbid-ae864d27-24f6-4265-c547-f737a601e87a")}catch{}})();function I({workflowName:a,...o}){switch(a){case l.INCREASE_UNDERNAMES:case l.EXTEND_LEASE:return e.jsx("h1",{className:"flex white text-[2rem]",style:{width:"100%",paddingBottom:"30px"},children:"Review"});case l.UPGRADE_NAME:case l.BUY_RECORD:return"Review your Purchase";default:return}}function ae(){var y,N,b;const a=_(),[{arioContract:o,arioProcessId:f,aoNetwork:m,aoClient:T}]=B(),[,v]=M(),[{walletAddress:s,wallet:u}]=W(),[{workflowName:n,interactionType:d,transactionData:t,interactionResult:r},A]=F(),j=O(),[p,R]=c.useState(),[i,k]=c.useState(E(d)),[g,C]=c.useState(I({workflowName:n})),[S,D]=c.useState("balance"),w={...t??{},intent:U[n],fromAddress:s==null?void 0:s.toString(),fundFrom:S,quantity:t==null?void 0:t.qty},{data:x}=L(w);c.useEffect(()=>{if(!t&&!n){a("/");return}R(H({interactionType:d,transactionData:{...t,deployedTransactionId:r==null?void 0:r.id}})),k(E(d)),C(I({workflowName:n}))},[t,r,n,d,s]),c.useEffect(()=>{r!=null&&r.id&&a("/transaction/complete")},[r,a]);async function P(){try{if(!(o instanceof Y))throw new Error("Wallet must be connected to dispatch transactions.");if(!t||!n)throw new Error("Transaction data is missing");if(!s)throw new Error("Wallet address is missing");await Q({arioContract:o,workflowName:n,payload:t,owner:s,processId:f,dispatch:A,signer:u==null?void 0:u.contractSigner,ao:T,scheduler:m.ARIO.SCHEDULER,fundFrom:S})}catch(h){z.emit("error",h)}finally{s&&J({dispatch:v,arioProcessId:f,walletAddress:s,aoNetworkSettings:m})}}return p?e.jsx("div",{className:"page",children:e.jsxs("div",{className:"flex flex-column center",style:j?{}:{gap:"0px",maxWidth:"900px",width:"100%"},children:[i&&i.length?e.jsx("div",{className:"flex flex-row",style:{marginBottom:"20px",width:"100%"},children:e.jsx(V,{stage:3,stages:i})}):e.jsx(e.Fragment,{}),typeof g=="string"?e.jsx("div",{className:"flex flex-row text-large white bold center",style:{height:"100%",padding:"50px 0px",borderTop:i!=null&&i.length?"solid 1px var(--text-faded)":""},children:g}):g,e.jsx(K,{...p,bordered:!0,compact:!0,overrides:{...p.overrides,targetId:(y=t==null?void 0:t.targetId)==null?void 0:y.toString()}}),e.jsx("div",{className:"flex w-full pt-10 box-border",children:e.jsx(G,{details:w,fundingSourceCallback:h=>D(h)})}),e.jsx("div",{className:"flex",style:{marginTop:20,width:"100%",justifyContent:"flex-end"},children:e.jsx(X,{onNext:!x||(N=x.fundingPlan)!=null&&N.shortfall&&((b=x.fundingPlan)==null?void 0:b.shortfall)>0?void 0:()=>P(),onBack:()=>a(-1),backText:"Back",nextText:"Confirm"})})]})}):e.jsx(q,{loading:!0,message:"Loading transaction data..."})}export{ae as default};
//# sourceMappingURL=TransactionReview-216ba420.js.map
