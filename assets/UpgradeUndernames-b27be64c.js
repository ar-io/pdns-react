import{F as D,d as k,a as _,E as L,c as M,r as n,aY as O,l as o,A as W,aa as F,f as y,j as e,a3 as P,e as V,as as q,am as z,an as h,ae as B}from"./index-fe9d48b2.js";import{S as Y}from"./Info-115816e2.js";import{C as $}from"./Counter-81a7c8b6.js";import{T as G}from"./TransactionCost-d77ed73a.js";(function(){try{var i=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c=new Error().stack;c&&(i._sentryDebugIds=i._sentryDebugIds||{},i._sentryDebugIds[c]="09a5f22b-7ce6-4b52-acfd-b2c33399df1a",i._sentryDebugIdIdentifier="sentry-dbid-09a5f22b-7ce6-4b52-acfd-b2c33399df1a")}catch{}})();function K(){const i=D(),c=k(),d=_(),[{arweaveDataProvider:N,ioTicker:p,arioContract:w}]=L(),t=c.pathname.split("/").at(-2),[,f]=M(),[s,b]=n.useState(),[S,I]=n.useState(),[v,j]=n.useState(0),[r,C]=n.useState(0),[E,g]=n.useState(!1),[l,u]=n.useState(0);n.useEffect(()=>{R()},[t]),n.useEffect(()=>{if(!t||!s)return;u(void 0),(async()=>{if(r===0){u(0);return}Number.isNaN(r)&&y.emit("error",new Error("Invalid undername count, must be a number greater than 0"));const x=await w.getTokenCost({intent:"Increase-Undername-Limit",name:o(t),quantity:r}).then(m=>new B(m).toIO().valueOf());u(x)})()},[r,s,t]);async function R(){try{if(g(!0),t&&O({name:o(t)})){const a=await N.getRecord({domain:o(t)});if(!a)throw new Error(`Unable to get record for ${t}`);b(a);const x=new W(a==null?void 0:a.processId),m=F.init({processId:x.toString()}),T=await m.getRecords().then(A=>Object.keys(A).filter(U=>U==="@").length);j(T),I(m)}}catch(a){y.emit("error",a),d("/manage/names")}finally{g(!1)}}return E||!s||!S||!t?e.jsx("div",{className:"page center",children:e.jsx(P,{size:80,message:"Loading domain record"})}):e.jsx("div",{className:"page center",children:e.jsxs("div",{className:"flex flex-column",style:{maxWidth:"1000px"},children:[e.jsx("h1",{className:"flex white",children:"Increase Undernames"}),e.jsxs("div",{className:"flex center",style:{justifyContent:"space-between",border:"1px solid var(--text-faded)",padding:"35px 40px",borderRadius:"var(--corner-radius)",flexDirection:i?"column":"row",gap:"30px"},children:[e.jsxs("div",{className:"flex flex-column",style:{fontSize:"16px",width:"fit-content",gap:"5px"},children:[e.jsxs("span",{className:"flex grey center",style:{gap:"8px",whiteSpace:"nowrap"},children:["Total Undernames:"," ",e.jsx("span",{className:"white",children:s.undernameLimit}),e.jsxs("span",{className:"flex add-box center",style:{},children:["+",r]})]}),e.jsxs("span",{className:"flex grey",children:["Used:Â ",e.jsxs("span",{className:"white",children:[" ",v]})]})]}),e.jsx($,{maxValue:V-s.undernameLimit,minValue:0,value:r,setValue:C,containerStyle:{width:"fit-content",justifyContent:"center",alignItems:"center"},valueStyle:{background:"var(--card-bg)",width:"50px",height:"40px",alignItems:"center",justifyContent:"center",border:"1px solid var(--text-faded)",borderRadius:"var(--corner-radius)",margin:"0px 10px",fontSize:"14px"},editable:!0})]}),e.jsx(G,{ioRequired:!0,fee:{[p]:l,ar:0},info:e.jsxs("div",{className:"flex flex-row flex-left",style:{gap:"10px",maxWidth:"50%",justifyContent:"flex-start",alignItems:"flex-start"},children:[e.jsx(Y,{width:"20px",height:"20px",fill:"var(--text-grey)"}),e.jsxs("span",{className:"flex flex-column flex-left grey text",style:{textAlign:"left",lineHeight:"1.5em"},children:["Increasing the undername limit is paid in ",p," tokens."]})]})}),e.jsx(q,{backText:"Cancel",nextText:"Confirm",onBack:()=>d(`/manage/names/${o(t)}`),onNext:!l||l<0?void 0:()=>{const a={name:o(t),qty:r,oldQty:s.undernameLimit,processId:s.processId};f({type:"setTransactionData",payload:{assetId:z.toString(),functionName:"increaseundernameLimit",...a,interactionPrice:l}}),f({type:"setInteractionType",payload:h.INCREASE_UNDERNAMES}),f({type:"setWorkflowName",payload:h.INCREASE_UNDERNAMES}),d("/transaction/review",{state:`/manage/names/${o(t)}/upgrade-undernames`})},customBackStyle:{minWidth:"100px",padding:" 12px 16px"},customNextStyle:{minWidth:"100px",padding:" 12px 16px"}})]})})}export{K as default};
//# sourceMappingURL=UpgradeUndernames-b27be64c.js.map
