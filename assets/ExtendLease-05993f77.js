import{aE as k,aX as M,b as W,cC as O,a as B,r as n,bc as f,be as g,bu as I,bz as F,aD as U,aU as $,b7 as P,j as e,bw as X,aI as Y,aM as p,bA as S,b2 as z,b3 as V,by as q,cH as G,bv as h,bC as H,A as J,bo as K}from"./index-223dc9fe.js";import{W as Q}from"./WarningCard-7f47503c.js";import{g as Z}from"./transaction-descriptions-d137a3b7.js";import{C as ee}from"./Counter-90e6dc3e.js";import{T as te}from"./TransactionCost-440acf8c.js";(function(){try{var i=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},d=new Error().stack;d&&(i._sentryDebugIds=i._sentryDebugIds||{},i._sentryDebugIds[d]="12d0d3c7-c4d4-4fb1-c9f9-d92956b06197",i._sentryDebugIdIdentifier="sentry-dbid-12d0d3c7-c4d4-4fb1-c9f9-d92956b06197")}catch{}})();function ie(){const[{ioTicker:i,arioContract:d,ioProcessId:b}]=k(),[{walletAddress:w}]=M(),[,u]=W(),T=O(),x=B(),t=T.pathname.split("/").at(-2),[a,D]=n.useState(),[L,y]=n.useState(),[l,A]=n.useState(1),[r,C]=n.useState(0),[o,N]=n.useState(),[v,R]=n.useState(0),[j,E]=n.useState(!1);n.useEffect(()=>{if(!t){x("/manage/names");return}_(f(t))},[t]),n.useEffect(()=>{if(!a||!t||!g(a))return;N(void 0),(async()=>{const s=await d.getTokenCost({intent:"Extend-Lease",name:t,years:l}).then(m=>new K(m).toIO().valueOf());N(s)})()},[l,r,a,t]);async function _(c){try{E(!0);const s=await d.getArNSRecord({name:f(c)});if(!s)throw new Error(`Unable to get record for ${c}`);if(y(s.type),D(s),!g(s)){y(I.BUY);return}if(!w)throw new Error("Wallet address not found");const m=await d.getBalance({address:w.toString()});R(m??0),C(Math.max(0,F-U(s.startTimestamp,s.endTimestamp)))}catch(s){$.emit("error",s),await P(2e3),x("/manage/names")}finally{E(!1)}}return!a||!t?e.jsx(X,{loading:!a,message:`Loading info for ${t}`}):!g(a)||L===I.BUY?e.jsx("div",{className:"page center",children:e.jsx(Y,{showClose:!1,cancelText:"Manage",body:e.jsx("span",{className:"flex flex-column white center",style:{height:"100%"},children:"This domain is permanently registered and its lease cannot be extended."})})}):e.jsx("div",{className:"page center",children:e.jsxs("div",{className:"flex flex-column",style:{maxWidth:"1000px"},children:[e.jsxs("div",{className:"flex flex-row center",style:{justifyContent:"space-between"},children:[e.jsx("h1",{className:"white text-[2rem]",children:"Extend Lease"}),e.jsxs("div",{className:"flex flex-row center white",style:{border:"solid 1px var(--text-faded)",borderRadius:"var(--corner-radius)",gap:"8px",width:"fit-content",padding:"12px"},children:[e.jsx(p,{width:"22px",height:"22px",fill:"var(--text-grey)"}),"Expiring on ",S(a.endTimestamp)]})]}),e.jsxs("div",{className:"flex flex-col relative p-[30px] w-full h-full bg-foreground box-border rounded-md ",children:[j&&e.jsx("div",{className:"flex flex-col items-center justify-center rounded-md bg-foreground h-full w-full absolute top-0 left-0",children:e.jsx("div",{className:"flex flex-row items-center justify-center",children:e.jsx(z,{animationData:V,loop:!0,className:"h-[150px]"})})}),!j&&r<1&&e.jsx("div",{className:"flex flex-col center  rounded-md  bg-[rgb(0,0,0,0.5)] h-full w-full absolute top-0 left-0",children:e.jsxs("div",{className:"flex flex-row items-center justify-center max-w-fit h-fit rounded-md border border-error text-white bg-foreground p-6 gap-2",children:[" ",e.jsx(p,{width:"24px",height:"24px",fill:"var(--error-red)"}),e.jsx("span",{className:"center",children:"Maximum lease extension reached"})]})}),e.jsx(ee,{setValue:A,value:l,maxValue:r,minValue:q,valueName:l>1?"years":"year",valueStyle:{padding:"10px 80px"},detail:e.jsxs("span",{children:["until"," ",S(a.endTimestamp+l*G)]}),title:e.jsx("span",{className:"white",style:{padding:"0px 10px 10px 10px",fontWeight:"500"},children:`Extension Duration ( up to ${Math.max(1,r)} year${r>1?"s":""} )`})})]}),e.jsx(te,{feeWrapperStyle:{alignItems:"center",justifyContent:"center",height:"100%"},fee:{[i]:o},ioRequired:!0,info:e.jsx("div",{children:e.jsx(Q,{wrapperStyle:{padding:"10px",fontSize:"14px",alignItems:"center"},customIcon:e.jsx(p,{width:"20px",fill:"var(--accent)"}),text:Z({workflowName:h.EXTEND_LEASE,ioTicker:i})||""})})}),e.jsx(H,{backText:"Cancel",nextText:"Continue",customNextStyle:{background:r<1&&"var(--text-grey)",color:r<1&&"var(--text-white)"},onBack:()=>{x(`/manage/names/${f(t)}`)},onNext:!o||o<0?void 0:r>=1||o<=v?()=>{const c={name:t,years:l,processId:new J(a.processId),qty:o};u({type:"setInteractionType",payload:h.EXTEND_LEASE}),u({type:"setTransactionData",payload:{assetId:b,functionName:"extendRecord",...c,arnsRecord:a,interactionPrice:o}}),u({type:"setWorkflowName",payload:h.EXTEND_LEASE}),x("/transaction/review",{state:`/manage/names/${f(t)}/extend`})}:void 0,detail:o&&o>v&&r>0?e.jsxs("div",{className:"flex flex-row center",style:{width:"fit-content",height:"fit-content",borderRadius:"var(--corner-radius)",border:"solid 1px var(--error-red)",background:"#1D1314",padding:"8px",boxSizing:"border-box",color:"var(--error-red)",gap:"10px",whiteSpace:"nowrap",fontSize:"13px"},children:[" ",e.jsx(p,{width:"24px",height:"24px",fill:"var(--error-red)"}),e.jsx("span",{className:"center",children:"Insufficient funds."})]}):e.jsx(e.Fragment,{})})]})})}export{ie as default};
//# sourceMappingURL=ExtendLease-05993f77.js.map
