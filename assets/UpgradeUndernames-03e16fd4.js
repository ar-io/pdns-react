import{aE as N,b8 as D,aF as k,cE as _,a as L,b as M,r as o,be as i,cN as O,A as W,bn as P,aU as q,j as e,a_ as z,cv as V,bq as y,aM as B,bx as f,bE as $}from"./index-7966dfcf.js";import{W as F}from"./WarningCard-d8e5b7dd.js";import{g as Q}from"./transaction-descriptions-4d43ecce.js";import{C as G}from"./Counter-3c5a94df.js";import{T as K}from"./TransactionCost-b6b7ac5a.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new Error().stack;s&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[s]="9df2af44-cf59-447f-37f0-55449c9ec8a4",n._sentryDebugIdIdentifier="sentry-dbid-9df2af44-cf59-447f-37f0-55449c9ec8a4")}catch{}})();function X({name:n,quantity:s}){const[{ioProcessId:r,arioContract:m}]=N();return D({queryKey:["increaseUndernameCost",s,r.toString()],queryFn:async()=>await m.getTokenCost({intent:"Increase-Undername-Limit",quantity:s,name:n}),staleTime:1e3*60*5})}function te(){const n=k(),s=_(),r=L(),[{arweaveDataProvider:m,ioTicker:p,ioProcessId:h}]=N(),t=s.pathname.split("/").at(-2),[,u]=M(),[c,w]=o.useState(),[I,S]=o.useState(),[b,v]=o.useState(0),[d,C]=o.useState(0),{data:l}=X({name:i(t??""),quantity:d}),[j,x]=o.useState(!1);o.useEffect(()=>{E()},[t]);async function E(){try{if(x(!0),t&&O({name:i(t)})){const a=await m.getRecord({domain:i(t)});if(!a)throw new Error(`Unable to get record for ${t}`);w(a);const T=new W(a==null?void 0:a.processId),g=P.init({processId:T.toString()}),U=await g.getRecords().then(R=>Object.keys(R).filter(A=>A!=="@").length);v(U),S(g)}}catch(a){q.emit("error",a),r("/manage/names")}finally{x(!1)}}return j||!c||!I||!t?e.jsx("div",{className:"page center",children:e.jsx(z,{size:80,message:"Loading domain record"})}):e.jsx("div",{className:"page center",children:e.jsxs("div",{className:"flex flex-column",style:{maxWidth:"1000px"},children:[e.jsx("h1",{className:"flex white text-[2rem]",children:"Increase Undernames"}),e.jsxs("div",{className:"flex center",style:{justifyContent:"space-between",border:"1px solid var(--text-faded)",padding:"35px 40px",borderRadius:"var(--corner-radius)",flexDirection:n?"column":"row",gap:"30px"},children:[e.jsxs("div",{className:"flex flex-column",style:{fontSize:"16px",width:"fit-content",gap:"5px"},children:[e.jsxs("span",{className:"flex grey center",style:{gap:"8px",whiteSpace:"nowrap"},children:["Total Undernames:"," ",e.jsx("span",{className:"white",children:c.undernameLimit}),e.jsxs("span",{className:"flex add-box center",style:{},children:["+",d]})]}),e.jsxs("span",{className:"flex grey",children:["Used:Â ",e.jsxs("span",{className:"white",children:[" ",b]})]})]}),e.jsx(G,{maxValue:V-c.undernameLimit,minValue:0,value:d,setValue:C,containerStyle:{width:"fit-content",justifyContent:"center",alignItems:"center"},valueStyle:{background:"var(--card-bg)",width:"50px",height:"40px",alignItems:"center",justifyContent:"center",border:"1px solid var(--text-faded)",borderRadius:"var(--corner-radius)",margin:"0px 10px",fontSize:"14px"},editable:!0})]}),e.jsx(K,{feeWrapperStyle:{alignItems:"center",justifyContent:"center",height:"100%"},ioRequired:!0,fee:{[p]:d===0?0:l?new y(l).toIO().valueOf():void 0,ar:0},info:e.jsx("div",{children:e.jsx(F,{wrapperStyle:{padding:"10px",fontSize:"14px",alignItems:"center"},customIcon:e.jsx(B,{width:"20px",fill:"var(--accent)"}),text:Q({workflowName:f.INCREASE_UNDERNAMES,ioTicker:p})||""})})}),e.jsx($,{backText:"Cancel",nextText:"Confirm",onBack:()=>r(`/manage/names/${i(t)}`),onNext:!l||l<0?void 0:()=>{const a={name:i(t),qty:d,oldQty:c.undernameLimit,processId:c.processId};u({type:"setTransactionData",payload:{assetId:h,functionName:"increaseundernameLimit",...a,interactionPrice:new y(l).toIO().valueOf()}}),u({type:"setInteractionType",payload:f.INCREASE_UNDERNAMES}),u({type:"setWorkflowName",payload:f.INCREASE_UNDERNAMES}),r("/transaction/review",{state:`/manage/names/${i(t)}/upgrade-undernames`})},customBackStyle:{minWidth:"100px",padding:" 12px 16px"},customNextStyle:{minWidth:"100px",padding:" 12px 16px"}})]})})}export{te as default};
//# sourceMappingURL=UpgradeUndernames-03e16fd4.js.map
