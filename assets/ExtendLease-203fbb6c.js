import{aE as C,aX as _,b as k,cC as M,a as W,r as o,bc as p,be as g,bu as E,bz as O,aD as z,aU as B,b7 as F,j as e,bw as U,aI as $,aM as f,bA as I,by as P,cH as X,bv as h,bC as Y,A as V,bo as q}from"./index-0e13d412.js";import{W as G}from"./WarningCard-5d130387.js";import{g as H}from"./transaction-descriptions-e3d19882.js";import{C as J}from"./Counter-ae010ba7.js";import{T as K}from"./TransactionCost-28685b5b.js";(function(){try{var i=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},d=new Error().stack;d&&(i._sentryDebugIds=i._sentryDebugIds||{},i._sentryDebugIds[d]="f3f11c3c-fcfa-4f0c-0988-9ce511d9667d",i._sentryDebugIdIdentifier="sentry-dbid-f3f11c3c-fcfa-4f0c-0988-9ce511d9667d")}catch{}})();function re(){const[{ioTicker:i,arioContract:d,ioProcessId:b}]=C(),[{walletAddress:w}]=_(),[,u]=k(),S=M(),x=W(),a=S.pathname.split("/").at(-2),[t,T]=o.useState(),[j,y]=o.useState(),[c,D]=o.useState(1),[s,R]=o.useState(0),[n,v]=o.useState(),[N,A]=o.useState(0);o.useEffect(()=>{if(!a){x("/manage/names");return}L(p(a))},[a]),o.useEffect(()=>{if(!t||!a||!g(t))return;v(void 0),(async()=>{const r=await d.getTokenCost({intent:"Extend-Lease",name:a,years:c}).then(m=>new q(m).toIO().valueOf());v(r)})()},[c,s,t,a]);async function L(l){try{const r=await d.getArNSRecord({name:p(l)});if(!r)throw new Error(`Unable to get record for ${l}`);if(y(r.type),T(r),!g(r)){y(E.BUY);return}if(!w)throw new Error("Wallet address not found");const m=await d.getBalance({address:w.toString()});A(m??0),R(Math.max(0,O-z(r.startTimestamp,r.endTimestamp)))}catch(r){B.emit("error",r),await F(2e3),x("/manage/names")}}return!t||!a?e.jsx(U,{loading:!t,message:`Loading info for ${a}`}):!g(t)||j===E.BUY?e.jsx("div",{className:"page center",children:e.jsx($,{showClose:!1,cancelText:"Manage",body:e.jsx("span",{className:"flex flex-column white center",style:{height:"100%"},children:"This domain is permanently registered and its lease cannot be extended."})})}):e.jsx("div",{className:"page center",children:e.jsxs("div",{className:"flex flex-column",style:{maxWidth:"1000px"},children:[e.jsxs("div",{className:"flex flex-row center",style:{justifyContent:"space-between"},children:[e.jsx("h1",{className:"white text-[2rem]",children:"Extend Lease"}),e.jsxs("div",{className:"flex flex-row center white",style:{border:"solid 1px var(--text-faded)",borderRadius:"var(--corner-radius)",gap:"8px",width:"fit-content",padding:"12px"},children:[e.jsx(f,{width:"22px",height:"22px",fill:"var(--text-grey)"}),"Expiring on ",I(t.endTimestamp)]})]}),e.jsxs("div",{className:"flex flex-column",style:{width:"100%",height:"100%",background:"var(--card-bg)",borderRadius:"var(--corner-radius)",padding:"30px",boxSizing:"border-box",position:"relative"},children:[s<1?e.jsx("div",{className:"flex flex-column center modal-container",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(0,0,0,0.5)",borderRadius:"var(--corner-radius)",zIndex:1},children:e.jsxs("div",{className:"flex flex-row center",style:{width:"fit-content",height:"fit-content",borderRadius:"var(--corner-radius)",border:"solid 1px var(--error-red)",background:"#1D1314",padding:"10px",boxSizing:"border-box",color:"var(--error-red)",gap:"10px"},children:[" ",e.jsx(f,{width:"24px",height:"24px",fill:"var(--error-red)"}),e.jsx("span",{className:"center",children:"Maximum lease extension reached"})]})}):e.jsx(e.Fragment,{}),e.jsx(J,{setValue:D,value:c,maxValue:s,minValue:P,valueName:c>1?"years":"year",valueStyle:{padding:"10px 80px"},detail:e.jsxs("span",{children:["until"," ",I(t.endTimestamp+c*X)]}),title:e.jsx("span",{className:"white",style:{padding:"0px 10px 10px 10px",fontWeight:"500"},children:`Extension Duration ( up to ${Math.max(1,s)} year${s>1?"s":""} )`})})]}),e.jsx(K,{feeWrapperStyle:{alignItems:"center",justifyContent:"center",height:"100%"},fee:{[i]:n},ioRequired:!0,info:e.jsx("div",{children:e.jsx(G,{wrapperStyle:{padding:"10px",fontSize:"14px",alignItems:"center"},customIcon:e.jsx(f,{width:"20px",fill:"var(--accent)"}),text:H({workflowName:h.EXTEND_LEASE,ioTicker:i})||""})})}),e.jsx(Y,{backText:"Cancel",nextText:"Continue",customNextStyle:{background:s<1&&"var(--text-grey)",color:s<1&&"var(--text-white)"},onBack:()=>{x(`/manage/names/${p(a)}`)},onNext:!n||n<0?void 0:s>=1||n<=N?()=>{const l={name:a,years:c,processId:new V(t.processId),qty:n};u({type:"setInteractionType",payload:h.EXTEND_LEASE}),u({type:"setTransactionData",payload:{assetId:b,functionName:"extendRecord",...l,arnsRecord:t,interactionPrice:n}}),u({type:"setWorkflowName",payload:h.EXTEND_LEASE}),x("/transaction/review",{state:`/manage/names/${p(a)}/extend`})}:void 0,detail:n&&n>N&&s>0?e.jsxs("div",{className:"flex flex-row center",style:{width:"fit-content",height:"fit-content",borderRadius:"var(--corner-radius)",border:"solid 1px var(--error-red)",background:"#1D1314",padding:"8px",boxSizing:"border-box",color:"var(--error-red)",gap:"10px",whiteSpace:"nowrap",fontSize:"13px"},children:[" ",e.jsx(f,{width:"24px",height:"24px",fill:"var(--error-red)"}),e.jsx("span",{className:"center",children:"Insufficient funds."})]}):e.jsx(e.Fragment,{})})]})})}export{re as default};
//# sourceMappingURL=ExtendLease-203fbb6c.js.map
