import{d as R,c$ as k,g as C,c as _,cU as D,a as P,b as U,r as g,bP as s,bK as B,bw as j,bU as M,aK as F,j as e,aP as O,aT as v,bV as S,cI as W,cJ as Y,bT as $,d0 as V,bX as X,bv as T,A as I,bQ as b}from"./index-9f5ffb77.js";import{C as G,T as K}from"./TransactionCost-5c793c70.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},d=new Error().stack;d&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[d]="40a2850d-8f25-4b25-a15b-8b73cbedbdee",r._sentryDebugIdIdentifier="sentry-dbid-40a2850d-8f25-4b25-a15b-8b73cbedbdee")}catch{}})();function q({name:r,quantity:d,intent:x,type:p,years:i}){const[{arioProcessId:y,arioContract:u}]=R();return k({queryKey:[x,d,y.toString(),i,r,p],queryFn:async()=>await u.getTokenCost({intent:x,quantity:d,name:r,type:p,years:i}),staleTime:1e3*60*5})}function J(){const[{arioTicker:r,arioProcessId:d}]=R(),[{balances:x}]=C(),p=x[r]??0,[,i]=_(),y=D(),u=P(),n=y.pathname.split("/").at(-2),{data:t,isLoading:w}=U({domain:n}),o=t==null?void 0:t.arnsRecord,[a,m]=g.useState(s.LEASE),[f,A]=g.useState(1),[c,E]=g.useState(0),{data:N,isLoading:L}=q(a==="permabuy"?{intent:"Upgrade-Name",name:n}:{intent:"Extend-Lease",years:f,type:a==null?void 0:a.toString(),name:n}),l=N?new B(N).toARIO().valueOf():void 0;return g.useEffect(()=>{var h;if(!n){u("/manage/names");return}if(t!=null&&t.arnsRecord)if(m((h=t.arnsRecord)==null?void 0:h.type),j(t==null?void 0:t.arnsRecord))E(Math.max(0,M-F(t.arnsRecord.startTimestamp,t.arnsRecord.endTimestamp)));else{m(s.BUY),E(0);return}},[n,t]),t!=null&&t.arnsRecord&&!j(t.arnsRecord)?e.jsx("div",{className:"page center",children:e.jsx(O,{showClose:!1,cancelText:"Manage",body:e.jsx("span",{className:"flex flex-column white center",style:{height:"100%"},children:"This domain is permanently registered and its lease cannot be extended."})})}):e.jsx("div",{className:"page center",children:e.jsxs("div",{className:"flex flex-column",style:{maxWidth:"1000px"},children:[e.jsxs("div",{className:"flex flex-row center",style:{justifyContent:"space-between"},children:[e.jsx("h1",{className:"white text-[2rem]",children:"Extend Lease"}),e.jsxs("div",{className:"flex flex-row center white",style:{border:"solid 1px var(--text-faded)",borderRadius:"var(--corner-radius)",gap:"8px",width:"fit-content",padding:"12px"},children:[e.jsx(v,{width:"22px",height:"22px",fill:"var(--text-grey)"}),"Expiring on"," ",o!=null&&o.endTimestamp?S(o.endTimestamp):"N/A"]})]})," ",e.jsxs("div",{className:"flex flex-row flex-space-between",style:{gap:"25px"},children:[e.jsxs("button",{className:"flex flex-row center text-medium bold pointer",onClick:()=>m(s.LEASE),style:{position:"relative",background:a===s.LEASE?"var(--text-white)":"",color:a===s.LEASE?"var(--text-black)":"var(--text-white)",border:"solid 2px var(--text-faded)",borderRadius:"var(--corner-radius)",height:"56px",borderBottomWidth:"0.5px"},children:["Extend Lease"," ",a===s.LEASE?e.jsx("div",{style:{position:"absolute",bottom:"-6px",left:"50%",transform:"rotate(45deg)",width:"11px",height:"11px",background:"var(--text-white)"}}):e.jsx(e.Fragment,{})]}),e.jsxs("button",{className:"flex flex-row center text-medium bold pointer",style:{position:"relative",background:a===s.BUY?"var(--text-white)":"",color:a===s.BUY?"var(--text-black)":"var(--text-white)",border:"solid 2px var(--text-faded)",borderRadius:"var(--corner-radius)",height:"56px",borderBottomWidth:"0.5px"},onClick:()=>m(s.BUY),children:["Permanently Buy"," ",a===s.BUY?e.jsx("div",{style:{position:"absolute",bottom:-6,left:"50%",transform:"rotate(45deg)",width:"11px",height:"11px",background:"var(--text-white)"}}):e.jsx(e.Fragment,{})]})]}),e.jsx("div",{className:"flex flex-col relative p-[30px] w-full h-[200px] bg-foreground box-border rounded-md items-center justify-center ",children:a===s.LEASE?e.jsxs(e.Fragment,{children:[" ",w&&e.jsx("div",{className:"flex flex-col items-center justify-center rounded-md bg-foreground h-full w-full absolute top-0 left-0",children:e.jsx("div",{className:"flex flex-row items-center justify-center",children:e.jsx(W,{animationData:Y,loop:!0,className:"h-[150px]"})})}),!w&&c<1&&e.jsx("div",{className:"flex flex-col center  rounded-md  bg-[rgb(0,0,0,0.5)] h-full w-full absolute top-0 left-0",children:e.jsxs("div",{className:"flex flex-row items-center justify-center max-w-fit h-fit rounded-md border border-error text-white bg-foreground p-6 gap-2",children:[" ",e.jsx(v,{width:"24px",height:"24px",fill:"var(--error-red)"}),e.jsx("span",{className:"center",children:"Maximum lease extension reached"})]})}),e.jsx(G,{setValue:A,value:f,maxValue:c,minValue:$,valueName:f>1?"years":"year",valueStyle:{padding:"10px 80px"},detail:e.jsxs("span",{children:["until"," ",o!=null&&o.endTimestamp?S((o==null?void 0:o.endTimestamp)+f*V):"N/A"]}),title:e.jsx("span",{className:"white",style:{padding:"0px 10px 10px 10px",fontWeight:"500"},children:`Extension Duration ( up to ${Math.max(1,c)} year${c>1?"s":""} )`})})]}):e.jsxs("div",{className:"flex flex-column flex-center",style:{gap:"1em"},children:[e.jsx("span",{className:"text-medium grey center",children:"Registration Period"}),e.jsx("span",{className:"text-medium white center",children:"Permanent"})]})}),e.jsx(K,{feeWrapperStyle:{alignItems:"center",justifyContent:"center",height:"100%"},fee:L?{[r]:void 0}:{[r]:c<1&&a===s.LEASE?0:l},ioRequired:!0}),e.jsx(X,{backText:"Cancel",nextText:"Continue",customNextStyle:{background:c<1&&a===s.LEASE&&"var(--text-grey)",color:c<1&&a===s.LEASE&&"var(--text-white)"},onBack:()=>{u(`/manage/names/${T(n)}`)},onNext:!l||l<=0?void 0:l<=p?()=>{if(a===s.LEASE&&(t!=null&&t.arnsRecord)&&n){const h={name:n,years:f,processId:new I(t==null?void 0:t.arnsRecord.processId)};i({type:"setInteractionType",payload:b.EXTEND_LEASE}),i({type:"setWorkflowName",payload:b.EXTEND_LEASE}),i({type:"setTransactionData",payload:{assetId:d,functionName:"extendRecord",...h,arnsRecord:t.arnsRecord,interactionPrice:l}})}else t!=null&&t.arnsRecord&&n&&(i({type:"setInteractionType",payload:b.UPGRADE_NAME}),i({type:"setWorkflowName",payload:b.UPGRADE_NAME}),i({type:"setTransactionData",payload:{assetId:d,functionName:"upgradeName",name:n,processId:new I(t.arnsRecord.processId),arnsRecord:t.arnsRecord,interactionPrice:l}}));u("/transaction/review",{state:`/manage/names/${T(n)}/extend`})}:void 0,detail:l&&l>p?e.jsxs("div",{className:"flex flex-row center",style:{width:"fit-content",height:"fit-content",borderRadius:"var(--corner-radius)",border:"solid 1px var(--error-red)",background:"#1D1314",padding:"8px",boxSizing:"border-box",color:"var(--error-red)",gap:"10px",whiteSpace:"nowrap",fontSize:"13px"},children:[e.jsx(v,{width:"24px",height:"24px",fill:"var(--error-red)"}),e.jsx("span",{className:"center",children:"Insufficient funds."})]}):e.jsx(e.Fragment,{})})," "]})})}export{J as default};
//# sourceMappingURL=ExtendLease-41450897.js.map
